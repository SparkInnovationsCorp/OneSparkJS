/**
 * OneSparkJS JavaScript Game Engine
 * Version 1.0.0.0
 * Created by Jason Bramble
 * Copyright (c) 2023 Spark Innovations Corp
 * Licensed under the OneSparkJS License Agreement
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy of this software
 * and associated documentation files (the "Software"), to use, copy, modify, and distribute the Software
 * in non-commercial projects subject to the following conditions:
 *
 * - The above copyright notice and this permission notice shall be included in all copies or substantial
 *   portions of the Software.
 * - Credit shall be given to "OneSparkJS by Spark Innovations Corp" in any accompanying documentation or README file.
 *
 * Permission is also granted to use, copy, modify, and distribute the Software in commercial or revenue-generating
 * projects with the explicit permission of Spark Innovations Corp. To request permission, please contact us
 * at support@sparkinnovationscorp.com.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED
 * TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL
 * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF
 * CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 */
function _0x33c4(t,s){const i=_0x32a8();return(_0x33c4=function(t,s){return t-=111,i[t]})(t,s)}function _0x32a8(){const t=["GET","Module"," not found","includes","toString","indexOf","No files to load","$1S.import(","endsWith","1060632DhrmcS","https://","some","20076PpOkKz","http://","sort","Renderer","$1S.include(","floor","startsWith","handlePostTickEvent","onPostTick","onTick","statusText","push","function","href","Priority","1346104yzdxLX","split","1018212vjtHto","location","main.js","forEach","All files loaded successfully","onerror","28TDIuVe","1.0.0","substring","find","random","Error: obj is not an instance of ApplicationExtensionType","splice","699508hAqaWD","Instance","registerType","1633370CHGmmZ","async function factory() {\n","reset","registerExtension","Error evaluating script in ","load",', "',"open","\n}\nfactory();","pathname","Application","All extensions loaded.","onStart","requestAnimationFrame","Graphics","Type","importType","join","handleTickEvent","toLowerCase","onload","Parent","stack","charAt","198PiUqpS","log","include","Stage","Application not defined.","Type with alias ","Helper","Alias","send","6BmWhJi","onStop","Errors loading files: ","newId","getType","155370sEQenp","start","isArray","stopClock","getTypeAsync","slice","ExtensionType","length","error"];return(_0x32a8=function(){return t})()}(function(){for(var t=_0x33c4,s=_0x32a8();;)try{if(380020==-parseInt(t(114))+-parseInt(t(144))/2*(-parseInt(t(180))/3)+parseInt(t(131))/4+parseInt(t(147))/5+parseInt(t(111))/6*(-parseInt(t(137))/7)+parseInt(t(129))/8+parseInt(t(171))/9*(-parseInt(t(185))/10))break;s.push(s.shift())}catch(t){s.push(s.shift())}})(),(_0x57c0d9=>{const _0x321e0b=_0x33c4,_0x2b4ca2={};_0x2b4ca2[_0x321e0b(157)]=(()=>{const l=_0x321e0b,t=l(138);let s=0,n=!1,h=null,d=[];class e{constructor(t=0){const i=l;d[i(125)]({Instance:this,Priority:t}),d[i(116)]((t,s)=>t.Priority-s[i(128)])}}const u=async()=>{var t=l,s=await $1S[t(189)]("MainApp");s?((h=new s)[t(159)]&&h[t(159)](),i()):console[t(193)](t(175))},i=()=>{s=0,n=!0,window.requestAnimationFrame(a)},a=i=>{const e=l;let r=i-s;h&&(h[e(123)]&&h[e(123)](i,r),d.forEach(t=>{var s=e;t.Instance[s(165)]&&t[s(145)][s(165)](i,r)}),d.forEach(t=>{var s=e;t[s(145)][s(121)]&&t[s(145)][s(121)](i,r)}),h[e(122)])&&h[e(122)](i,r),s=i,n&&window[e(160)](a)},r=()=>{n=!1};return{ExtensionType:e,version:t,load:(t,r={},n=null)=>{const s=l;t[s(202)]("/")||(t+="/");{var i=t,e=r,h=()=>{const e=s;console[e(172)](e(158)),$1S[e(173)](t+e(133),null,(t,s)=>{var i=e;t?(r.autoStart&&u(),n&&n()):console[i(193)](s)})};const c=l;var a=d[c(192)],o=0;d[c(134)](t=>{var s=c;t[s(145)].onLoad&&t[s(145)].onLoad(i,e,()=>{++o===a&&h()})})}},start:u,stop:async()=>{var t=l;h[t(181)]&&h[t(181)](),r(),$1S[t(117)][t(161)].clear(),OneStartJS[t(174)][t(149)]()},get:()=>h,tick:a,startClock:i,stopClock:r,registerExtension:(t,s=0)=>{var i=l;t instanceof e?(d[i(125)]({Instance:t,Priority:s}),d[i(116)]((t,s)=>t.Priority-s.Priority)):console.error(i(142))}}})(),_0x2b4ca2[_0x321e0b(177)]={newId:()=>{var s=_0x33c4;let i="";for(let t=0;t<32;t++)i+=Math[s(119)](16*Math[s(141)]())[s(198)](16),7!==t&&11!==t&&15!==t&&19!==t||(i+="-");return i}},_0x2b4ca2[_0x321e0b(195)]=(()=>{let _0x55bad8=[],_0x1f8d1b=[],_0x14b07d=[],_0x171c2c=[];const _0x181123=(_0x1264dd,_0x46879e=null,_0x1fd759=null)=>{const _0x5d7d85=_0x33c4;if("string"==typeof _0x1264dd)_0x1264dd=[_0x1264dd];else if(!Array[_0x5d7d85(187)](_0x1264dd))return void("function"==typeof _0x1fd759&&_0x1fd759(!1,"Error: 'files' parameter must be an array or a string"));const _0x56f527=null==_0x46879e?_0x27c7d9():_0x46879e,_0x168687=_0x56f527.replace(/\/[^\/]+$/,"")+"/",_0x7e7a=_0x237aba=>{const _0x3c194a=_0x5d7d85,_0x3c0843=_0x3d945e(_0x237aba,_0x168687),_0x487709=_0x14b07d[_0x3c194a(113)](t=>t[_0x3c194a(168)]===_0x56f527&&t.Child===_0x237aba);if(_0x487709||_0x14b07d[_0x3c194a(125)]({Parent:_0x56f527,Child:_0x237aba}),!_0x55bad8.includes(_0x237aba)){if(_0x1f8d1b[_0x3c194a(197)](_0x237aba)){const _0x27d795=_0x1f8d1b[_0x3c194a(199)](_0x237aba);-1<_0x27d795&&_0x1f8d1b[_0x3c194a(143)](_0x27d795,1)}var _0x8fcf0c=new XMLHttpRequest;_0x8fcf0c[_0x3c194a(154)](_0x3c194a(194),_0x3c0843,!0),_0x8fcf0c[_0x3c194a(167)]=function(){const _0x48d05a=_0x3c194a;if(200===_0x8fcf0c.status){var _0x4ddd13=_0x8fcf0c.responseText,_0x4ddd13=_0x319f8b(_0x4ddd13,_0x3c0843);_0x4ddd13=_0x48d05a(148)+_0x4ddd13+_0x48d05a(155);try{eval(_0x4ddd13),_0x52f0b2++,_0x55bad8[_0x48d05a(197)](_0x237aba)||_0x55bad8[_0x48d05a(125)](_0x237aba),_0x3e2ea9()}catch(_0x3c5afa){console[_0x48d05a(193)](_0x48d05a(151)+_0x3c0843+":",_0x3c5afa),_0x31d573++,_0x1f8d1b[_0x48d05a(125)](_0x237aba),_0x3e2ea9()}}},_0x8fcf0c[_0x3c194a(136)]=function(){var t=_0x3c194a;console[t(193)](t(151)+_0x3c0843+":",_0x8fcf0c[t(124)]),_0x31d573++,_0x1f8d1b[t(125)](_0x237aba),_0x3e2ea9()},_0x8fcf0c[_0x3c194a(179)]()}};let _0x52f0b2=0,_0x31d573=0,_0x461087=[];const _0x3e2ea9=()=>{var t,s=_0x5d7d85;_0x52f0b2+_0x31d573===_0x1264dd.length&&(s=(t=0===_0x31d573)?s(135):s(182)+_0x461087[s(164)]("; "),_0x1fd759)&&_0x1fd759(t,s)},_0x319f8b=(i,e)=>{var r=_0x5d7d85,n=r(118),h=r(201);let a=0;for(;;){var o=i[r(199)](n,a),c=i[r(199)](h,a),l=-1;if(-1===o&&-1===c)break;if(-1!=o&&(-1==c||-1!=c&&o<c)&&(l=o),-1===(l=-1!=c&&(-1==o||-1!=o&&c<o)?c:l))break;let t=1,s=l+n[r(192)];for(;0<t&&s<i.length;)"("===i.charAt(s)?t++:")"===i[r(170)](s)&&t--,s++;if(0!==t)break;o=i[r(190)](l,s).slice(0,-1)+(r(153)+e+'")');i=i[r(190)](0,l)+o+i[r(190)](s),a=l+o[r(192)]}return i};_0x1264dd&&_0x1264dd[_0x5d7d85(192)]?_0x1264dd.forEach(_0x7e7a):typeof _0x1fd759===_0x5d7d85(126)&&_0x1fd759(!0,_0x5d7d85(200))},_0x1e14e8=async(t,s,i=null)=>(_0x181123(s,i),_0x18825a(t)),_0x38a612=(t,s)=>{const i=_0x33c4,e=_0x171c2c[i(140)](t=>t[i(178)]===s);e||_0x171c2c[i(125)]({Type:t,Alias:s})},_0x18825a=async s=>{const i=_0x33c4;for(;;){var t=_0x171c2c[i(140)](t=>t[i(178)]===s);if(t)return t[i(162)];await new Promise(t=>setTimeout(t,100))}},_0xfe1361=s=>{const i=_0x33c4,t=_0x171c2c.find(t=>t[i(178)]===s);if(t)return t[i(162)];throw new Error(i(176)+s+i(196))},_0x27c7d9=()=>{var t=_0x33c4,s=((new Error)[t(169)]||"")[t(130)]("\n")[3]||"",i=s[t(199)]("/",s[t(199)]("//")+2),e=s[t(199)](":",i);return-1!==i&&-1!==e?s[t(139)](i,e):""},_0x3d945e=(t,s)=>{var i=_0x33c4;return t[i(166)]()[i(120)](i(115))||t[i(166)]()[i(120)](i(112))||(s=new URL(s,window[i(132)][i(127)]),t=new URL(t,s)[i(156)]),t};return{include:_0x181123,importType:_0x1e14e8,registerType:_0x38a612,getType:_0xfe1361,getTypeAsync:_0x18825a}})(),_0x57c0d9.$1S={Application:{ExtensionType:_0x2b4ca2[_0x321e0b(157)][_0x321e0b(191)],load:_0x2b4ca2[_0x321e0b(157)][_0x321e0b(152)],start:_0x2b4ca2[_0x321e0b(157)][_0x321e0b(186)],startClock:_0x2b4ca2.Application.startClock,stopClock:_0x2b4ca2.Application[_0x321e0b(188)],get:_0x2b4ca2[_0x321e0b(157)].get,registerExtension:_0x2b4ca2[_0x321e0b(157)][_0x321e0b(150)]},Assets:{},Helper:{newId:_0x2b4ca2[_0x321e0b(177)][_0x321e0b(183)]},import:_0x2b4ca2[_0x321e0b(195)][_0x321e0b(163)],include:_0x2b4ca2[_0x321e0b(195)].include,registerType:_0x2b4ca2[_0x321e0b(195)][_0x321e0b(146)],getType:_0x2b4ca2.Module[_0x321e0b(184)],getTypeAsync:_0x2b4ca2[_0x321e0b(195)].getTypeAsync}})("undefined"!=typeof window?window:global);var _0x13d9cc=_0x4c42;function _0x4c42(t,s){var i=_0x575c();return(_0x4c42=function(t,s){return i[t-=104]})(t,s)}function _0x575c(){var t=["getTileset","createElement","statusText","audio","860251xpMUiI","red","images","clipPaths","ExtensionType","undefined","log","Canvas","responseText","error","GET","1066392ODYZNr","clip","src","121590rNuZgQ","send","Assets","1466lFDzyR","CanvasContext","parse","width","assetSheet","length","clipPath","loops","push","250ivOKnw","onload","preload","Ext","moveTo","lineTo","20340mgbtdt","open","getContext","height","655182FrVYBF","21092ubRuqv","assets.json","getAudio","path","max","isArray","$1S","min","name","getSpriteLoop","beginPath","getImage","480TxspiN","318wfuqhw","layouts","strokeStyle","drawImage","Error loading asset sheet","forEach","canvas","onLoad","62IDhOvJ","lineWidth","status","closePath"];return(_0x575c=function(){return t})()}function _0x2f7a(){const t=["MOUSE_CANVAS_ENTER","parse","tapout","filter","rotate","swipeStartT","1117374jcPNWr","TOUCH_START","keyUpEvent","mouseScrollEvent","SHAKE","handleShakeEvent","keyup","readyState","hidden","ExtensionType","MOUSE_CANVAS_LEAVE","TOUCH_MOVE","handles","SWIP_RIGHT","doubleTapThreshold","touchEndEvent","3384305XnXkJv","DEVICE_ORIENTATION","mouseclickout","keydown","keyDownEvent","swiperight","InputEventTypes","visibilityChangeEvent","touches","pinchThreshold","handleTapEvent","status","initialAngle","shakeTimeout","touchStartEvent","touchstart","overrideMimeType","touchMoveEvent","MOUSE_UP","now","handleMouseEvent","region","getElementById","handleRotationEvent","lastShakeTime","swipeStartX","TAP_OUT","push","PINCH","mouseDownEvent","application/json","CENTER_MOUSE_CLICK","priority","$1S","expand","KEY_DOWN","pinch","clientY","shakeHandlers","MOUSE_MOVE","changedTouches","sqrt","handlePinchEvent","clientX","onreadystatechange","2999688ubgocX","handleTouchEvent","MOUSE_SCROLL_DOWN","TOUCH_END","VISIBILITY_CHANGE","MOUSE_CLICK","KEY_UP","deviceOrientationEvent","responseText","isOver","touchcancel","mouseUpEvent","source","clear","length","mouseup","handleGenericEvent","MOUSE_CLICK_OUT","sort","rightmouseup","touchmove","handleVisibilityChange","atan2","DEVICE_MOTION","shakeThreshold","mousecanvasleave","TAP","onLoad","tap","attach","rightmouseclick","mousescrollup","mousemove","accelerationIncludingGravity","handleSwipeEvent","shake","4jrGIIf","abs","671478iVSbJj","hasOwnProperty","tapTimeout","eventHandler","doubleTapTimeout","15766240gcqAtf","mouseCanvasLeaveEvent","mouseCanvasEnterEvent","handleDeviceEvent","315567fXHwwk","initialDistance","852124ffnsbJ","RIGHT_MOUSE_CLICK","swipeThreshold","visibilitychange","MOUSE_ENTER","devicemotion","Inputs","deviceMotionEvent","this","addEventListener","release","Ext","TOUCH_CANCEL","deviceorientation","mouseleave","swipeleft","canvas","MOUSE_LEAVE","mousedown","mouseenter","tapThreshold"];return(_0x2f7a=function(){return t})()}function _0x1447(t,s){const i=_0x2f7a();return(_0x1447=function(t,s){return t-=150,i[t]})(t,s)}(function(){for(var t=_0x4c42,s=_0x575c();;)try{if(374560==-parseInt(t(114))*(parseInt(t(155))/2)+parseInt(t(147))/3*(-parseInt(t(134))/4)+-parseInt(t(146))/5*(-parseInt(t(129))/6)+parseInt(t(163))/7+parseInt(t(108))/8+-parseInt(t(111))/9*(-parseInt(t(123))/10)+parseInt(t(133))/11)break;s.push(s.shift())}catch(t){s.push(s.shift())}})(),(t=>{var s=_0x4c42,i={};i[s(113)]=(()=>{var h=s;class t extends $1S.Application[h(167)]{["assetSheet"]={audio:[],images:[],loops:[],layouts:[]};constructor(){super(100)}[h(154)]=(t,s,e)=>{var r=h;try{var i=t+r(135),n=new XMLHttpRequest;n[r(130)](r(107),i,!0),n[r(124)]=()=>{var t,i=r;200===n[i(157)]&&(t=JSON[i(116)](n[i(105)]),Array.isArray(t[i(162)])&&(this[i(118)][i(162)]=t[i(162)],$1S.Audio)&&this[i(118)].audio[i(152)](function(t){var s=i;$1S.Audio[s(125)](t[s(137)])}),Array[i(139)](t[i(165)])&&t[i(165)][i(152)](t=>{this.preloadImage(t)}),Array[i(139)](t[i(148)]))&&(this[i(118)][i(148)]=t[i(148)]),e&&e()},n.onerror=()=>{var t=r;console[t(106)](t(151),n[t(161)]),e&&e()},n[r(112)]()}catch(t){console[r(169)](r(151),t),e&&e()}};[h(136)]=s=>{var i=h;for(let t=0;t<this[i(118)][i(162)].length;t++)if(this[i(118)][i(162)][t][i(142)]===s)return this[i(118)][i(162)][t];return null};["getImage"]=s=>{var i=h;for(let t=0;t<this.assetSheet[i(165)][i(119)];t++)if(this[i(118)].images[t][i(142)]===s)return this[i(118)].images[t];return null};[h(143)]=s=>{var i=h;for(let t=0;t<this.assetSheet.loops[i(119)];t++)if(this[i(118)][i(121)][t].group===s)return this.assetSheet[i(121)][t];return null};[h(159)]=s=>{var i=h;for(let t=0;t<this.assetSheet.layouts[i(119)];t++)if(this[i(118)][i(148)][t].name===s)return this.assetSheet[i(148)][t];return null};["preloadImage"]=t=>{var s,i=h;t[i(137)]&&((s=new Image)[i(110)]=t.path,s.onload=()=>{var c=i,l=document[c(160)]("canvas"),d=l.getContext("2d");l.width=s.width,l[c(132)]=s[c(132)],d[c(150)](s,0,0,s.width,s.height),t[c(166)]&&0<t[c(166)][c(119)]?(t[c(166)].forEach(t=>{for(var s=c,i=1/0,e=-1/0,r=1/0,n=-1/0,h=0;h<t.clipPath.length;h++)i=Math[s(141)](i,t[s(120)][h].x),e=Math[s(138)](e,t[s(120)][h].x),r=Math.min(r,t[s(120)][h].y),n=Math[s(138)](n,t[s(120)][h].y);var a=document.createElement(s(153)),o=(a[s(117)]=e-i,a[s(132)]=n-r,a[s(131)]("2d"));d[s(149)]=s(164),d[s(156)]=5,d[s(144)](),d[s(127)](t[s(120)][0].x,t[s(120)][0].y);for(h=1;h<t[s(120)].length;h++)d[s(128)](t.clipPath[h].x,t[s(120)][h].y);d[s(158)](),d[s(109)](),o[s(150)](l,-i,-r),t[s(104)]=a,t[s(115)]=o,t[s(142)]&&this[s(118)][s(165)][s(122)](t)}),this.assetSheet[c(121)].push(t)):(t[c(104)]=l,t[c(115)]=d,this[c(118)].images[c(122)](t))})}}return{Ext:new t}})(),t[s(140)][s(113)]={getAudio:i[s(113)][s(126)][s(136)],getImage:i.Assets.Ext[s(145)],getSpriteLoop:i[s(113)][s(126)][s(143)],getTileset:i[s(113)][s(126)][s(159)]}})(typeof window!==_0x13d9cc(168)?window:global),function(){for(var t=_0x1447,s=_0x2f7a();;)try{if(448757==+parseInt(t(236))+-parseInt(t(265))/2+-parseInt(t(227))/3+-parseInt(t(225))/4*(parseInt(t(281))/5)+-parseInt(t(189))/6+parseInt(t(238))/7+parseInt(t(232))/8)break;s.push(s.shift())}catch(t){s.push(s.shift())}}(),(t=>{const s=_0x1447,n={};n[s(150)]={KEY_DOWN:s(284),KEY_UP:s(271),MOUSE_MOVE:s(221),MOUSE_UP:s(204),MOUSE_CLICK:"mouseclick",MOUSE_CLICK_OUT:s(283),MOUSE_DOUBLE_CLICK:"mousedoubleclick",RIGHT_MOUSE_CLICK:s(219),CENTER_MOUSE_CLICK:"centermouseclick",RIGHT_MOUSE_UP:s(208),CENTER_MOUSE_UP:"centermouseup",MOUSE_SCROLL_UP:s(220),MOUSE_SCROLL_DOWN:"mousescrolldown",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:s(252),MOUSE_CANVAS_ENTER:"mousecanvasenter",MOUSE_CANVAS_LEAVE:s(214),TOUCH_START:s(159),TOUCH_MOVE:s(209),TOUCH_END:"touchend",TOUCH_CANCEL:s(199),SWIP_LEFT:s(253),SWIPE_RIGHT:s(286),TAP:s(217),TAP_OUT:s(261),DOUBLE_TAP:"tap",PINCH:s(180),EXPAND:s(178),ROTATE:s(263),SHAKE:s(224),DEVICE_ORIENTATION:s(251),DEVICE_MOTION:s(243),VISIBILITY_CHANGE:s(241)},n.IO={loadJSON:(t,s)=>{const i=_0x1447,e=new XMLHttpRequest;e[i(160)](i(174)),e.open("GET",t,!0),e[i(188)]=function(){var t=i;4===e[t(272)]&&200===e[t(155)]&&s(JSON[t(260)](e[t(197)]))},e.send(null)}},n.Inputs=(()=>{const a=s;class t extends $1S.Application[a(274)]{["swipeStartX"]=null;[a(264)]=null;[a(240)]=50;[a(237)]=null;[a(156)]=null;[a(153)]=10;[a(182)]=[];["lastShakeTime"]=0;["shakeThreshold"]=15;[a(157)]=1e3;[a(229)]=null;[a(231)]=null;[a(279)]=300;[a(258)]=200;[a(277)]={};constructor(){super(0)}[a(216)]=(t,s,i)=>{var e=a;s[e(254)]&&((s=document[e(166)](s.canvas)).addEventListener(n[e(150)][e(183)],this.mouseMoveEvent),s[e(247)](e(256),this[e(173)]),s[e(247)](n[e(150)][e(162)],this[e(200)]),s[e(247)]("wheel",this[e(268)]),s[e(247)](e(257),this[e(234)]),s[e(247)]("mouseleave",this[e(233)]),s[e(247)](n[e(150)][e(266)],this[e(158)]),s[e(247)](n[e(150)][e(276)],this[e(161)]),s[e(247)](n.InputEventTypes.TOUCH_END,this[e(280)]),s[e(247)](n[e(150)].TOUCH_CANCEL,this.touchCancelEvent)),window[e(247)](n[e(150)].KEY_DOWN,this[e(285)]),window[e(247)](n[e(150)].KEY_UP,this[e(267)]),window.addEventListener(n[e(150)][e(282)],this[e(196)]),window.addEventListener(n[e(150)][e(212)],this[e(245)]),document[e(247)](n[e(150)][e(193)],this[e(151)]),i()};["keyUpEvent"]=s=>{const i=a;if(this.handles[n[i(150)][i(195)]]){this[i(277)][n[i(150)].KEY_UP].sort((t,s)=>t[i(176)]-s[i(176)]);for(let t=0;t<this[i(277)][n.InputEventTypes[i(195)]][i(203)];t++)if(this[i(277)][n.InputEventTypes[i(195)]][t][i(230)](s))break}};[a(285)]=s=>{const i=a;if(this[i(277)][n[i(150)][i(179)]]){this[i(277)][n[i(150)][i(179)]][i(207)]((t,s)=>t.priority-s[i(176)]);for(let t=0;t<this.handles[n.InputEventTypes[i(179)]][i(203)];t++)if(this.handles[n.InputEventTypes[i(179)]][t][i(230)](s))break}};["mouseMoveEvent"]=t=>{var s=a;this[s(164)](t,n.InputEventTypes[s(183)])};[a(200)]=t=>{var s=a;switch(t.button){case 0:this.handleMouseEvent(t,n.InputEventTypes[s(162)]);break;case 1:this[s(164)](t,n[s(150)].CENTER_MOUSE_UP);break;case 2:this[s(164)](t,n.InputEventTypes.RIGHT_MOUSE_UP)}};[a(173)]=t=>{var s=a;switch(t.button){case 0:this.handleMouseEvent(t,n[s(150)][s(194)]);break;case 1:this[s(164)](t,n[s(150)][s(175)]);break;case 2:this[s(164)](t,n[s(150)][s(239)])}};[a(234)]=t=>{var s=a;this[s(205)](t,n[s(150)][s(259)])};[a(233)]=t=>{var s=a;this[s(205)](t,n[s(150)][s(275)])};[a(268)]=t=>{var s=a;0<t.deltaY?this[s(164)](t,n[s(150)][s(191)]):this[s(164)](t,n.InputEventTypes.MOUSE_SCROLL_UP)};[a(158)]=t=>{var s=a;1===t[s(152)].length?(this[s(169)]=t.touches[0].clientX,this[s(264)]=t[s(152)][0][s(181)]):2===t[s(152)].length&&(this[s(237)]=calculateDistance(t[s(152)][0],t.touches[1]),this[s(246)][s(156)]=calculateAngle(t[s(152)][0],t[s(152)][1])),this[s(190)](t,n[s(150)][s(266)])};[a(161)]=t=>{var s,i,e=a;2===t[e(152)][e(203)]&&(null!==this[e(237)]&&(s=calculateDistance(t[e(152)][0],t[e(152)][1]),Math[e(226)](s-this[e(237)])>this[e(153)])&&(s>this[e(237)]?this[e(186)](t,n.InputEventTypes.EXPAND):this.handlePinchEvent(t,n[e(150)][e(172)]),this.initialDistance=s),null!==this[e(156)])&&(i=(s=calculateAngle(t.touches[0],t.touches[1]))-this[e(156)],this[e(167)](t,n[e(150)].ROTATE,i),this[e(156)]=s),this[e(190)](t,n[e(150)].TOUCH_MOVE)};[a(280)]=s=>{const i=a;var t,e;0===s[i(152)][i(203)]&&null===this[i(237)]&&null===this[i(156)]&&(null!==this[i(231)]?(clearTimeout(this.doubleTapTimeout),this.doubleTapTimeout=null,this.handleTapEvent(s,n.InputEventTypes.DOUBLE_TAP)):this.tapTimeout=setTimeout(()=>{const t=i;this[t(154)](s,n[t(150)][t(215)]),this[t(231)]=setTimeout(()=>{this[t(231)]=null},this[t(279)])},this[i(258)])),null!==this[i(169)]&&null!==this[i(264)]&&(t=(e=s[i(184)][0]).clientX-this[i(169)],e=e[i(181)]-this.swipeStartT,Math[i(226)](t)>Math[i(226)](e))&&Math[i(226)](t)>this[i(246)].swipeThreshold&&(0<t?this[i(223)](s,n[i(150)][i(278)]):this[i(223)](s,n[i(150)].SWIP_LEFT)),this[i(169)]=null,this[i(264)]=null,this[i(237)]=null,this.initialAngle=null,this[i(190)](s,n[i(150)][i(192)])};["touchCancelEvent"]=t=>{var s=a;this.handleTouchEvent(t,n.InputEventTypes[s(250)])};[a(196)]=t=>{var s=a;this[s(235)](t,n[s(150)][s(282)])};["deviceMotionEvent"]=t=>{var s,i,e=a;this[e(235)](t,n.InputEventTypes[e(212)]),t[e(222)]&&({x:t,y:s,z:i}=t[e(222)],Math[e(185)](t*t+s*s+i*i)>this[e(213)])&&Date[e(163)]()-this[e(168)]>this[e(157)]&&(this[e(168)]=Date[e(163)](),this.handleShakeEvent())};[a(151)]=()=>{var t=a,t=document[t(273)];this.handleVisibilityChange(t)};[a(205)]=(s,i)=>{const e=a;if(this.handles[i]){this[e(277)][i][e(207)]((t,s)=>t[e(176)]-s[e(176)]);for(let t=0;t<this[e(277)][i][e(203)];t++)if(this[e(277)][i][t][e(230)](s))break}};[a(164)]=(s,i)=>{const e=a;if(this.handles[i]){this[e(277)][i][e(207)]((t,s)=>t[e(176)]-s[e(176)]);for(let t=0;t<this[e(277)][i][e(203)];t++){var r=this[e(277)][i][t];if(r[e(165)]&&(s[e(187)]<r[e(165)].x1||s.clientX>r[e(165)].x2||s[e(181)]<r[e(165)].y1||s[e(181)]>r[e(165)].y2))i==n[e(150)][e(183)]&&r[e(198)]&&(r[e(198)]=!1,this[e(205)](s,n.InputEventTypes[e(255)])),i==n[e(150)][e(194)]&&(r[e(198)]=!1,this[e(205)](s,n[e(150)][e(206)]));else if(i!=n[e(150)].MOUSE_MOVE||r[e(198)]||(r[e(198)]=!0,this[e(205)](s,n[e(150)][e(242)])),r[e(230)](s))break}}};[a(190)]=(i,e)=>{const r=a;if(this[r(277)][e]){this.handles[e][r(207)]((t,s)=>t[r(176)]-s[r(176)]);for(let t=0;t<this[r(277)][e][r(203)];t++){var n=this[r(277)][e][t];let s=!1;for(let t=0;t<i.touches.length;t++){var h=i[r(152)][t];if(h[r(187)]>=n[r(165)].x1&&h[r(187)]<=n[r(165)].x2&&h[r(181)]>=n[r(165)].y1&&h[r(181)]<=n[r(165)].y2){s=!0;break}}if(s)if(n[r(230)](i))break}}};[a(154)]=(s,i)=>{const e=a;if(this[e(277)][i]){this[e(277)][i].sort((t,s)=>t[e(176)]-s[e(176)]);for(let t=0;t<this[e(277)][i][e(203)];t++){var r=this[e(277)][i][t];if(r[e(165)]&&(s[e(187)]<r[e(165)].x1||s[e(187)]>r[e(165)].x2||s[e(181)]<r[e(165)].y1||s[e(181)]>r.region.y2))i==n[e(150)][e(215)]&&(r[e(198)]=!1,this[e(205)](s,n[e(150)][e(170)]));else if(r[e(230)](s))break}}};["handleSwipeEvent"]=(s,i)=>{const e=a;if(this.handles[i]){this.handles[i][e(207)]((t,s)=>t[e(176)]-s[e(176)]);for(let t=0;t<this[e(277)][i][e(203)];t++){var r=this[e(277)][i][t];if(!r[e(165)]||!(s[e(187)]<r[e(165)].x1||s.clientX>r[e(165)].x2||s.clientY<r[e(165)].y1||s[e(181)]>r[e(165)].y2))if(r[e(230)](s))break}}};[a(186)]=(s,i)=>{const e=a;if(this[e(277)][i]){this.handles[i][e(207)]((t,s)=>t[e(176)]-s[e(176)]);for(let t=0;t<this[e(277)][i][e(203)];t++){var r=this[e(277)][i][t];if(!r[e(165)]||!(s[e(187)]<r.region.x1||s[e(187)]>r[e(165)].x2||s[e(181)]<r[e(165)].y1||s[e(181)]>r[e(165)].y2))if(r[e(230)](s))break}}};[a(167)]=(s,i,e)=>{const r=a;if(this.handles[i]){this[r(277)][i].sort((t,s)=>t[r(176)]-s[r(176)]);for(let t=0;t<this[r(277)][i][r(203)];t++){var n=this[r(277)][i][t];if(!n[r(165)]||!(s[r(187)]<n[r(165)].x1||s[r(187)]>n[r(165)].x2||s.clientY<n.region.y1||s.clientY>n[r(165)].y2))if(n.eventHandler(s,e))break}}};[a(235)]=(s,i)=>{const e=a;if(this.handles[i]){this[e(277)][i][e(207)]((t,s)=>t[e(176)]-s[e(176)]);for(let t=0;t<this[e(277)][i][e(203)];t++)if(this[e(277)][i][t].eventHandler(s))break}};[a(270)]=()=>{const i=a;if(this[i(277)][n[i(150)].SHAKE]){this[i(277)][n[i(150)][i(269)]][i(207)]((t,s)=>t.priority-s[i(176)]);for(let t=0;t<this.handles[n.InputEventTypes.SHAKE][i(203)];t++)if(this[i(277)][n[i(150)].SHAKE][t].eventHandler())break}};[a(210)]=s=>{const i=a;if(this[i(277)][n[i(150)].VISIBILITY_CHANGE]){this[i(277)][n[i(150)][i(193)]][i(207)]((t,s)=>t[i(176)]-s[i(176)]);for(let t=0;t<this[i(277)][n.InputEventTypes.VISIBILITY_CHANGE][i(203)];t++)if(this[i(277)][n.InputEventTypes[i(193)]][t][i(230)]({hidden:s}))break}};["attach"]=(t,s,i,e=100,r=null)=>{var n=a,s=(this[n(277)][t]||(this[n(277)][t]=[]),{source:s,eventHandler:i,priority:e||0,isOver:!1,region:r});return this[n(277)][t][n(171)](s),s};[a(248)]=s=>{const i=a;for(const t in this.handles)this[i(277)][i(228)](t)&&(this[i(277)][t]=this.handles[t][i(262)](t=>t[i(201)]!==s))};[a(202)]=t=>{this[a(277)]={}};["calculateDistance"]=(t,s)=>{var i=a,e=s[i(187)]-t[i(187)],s=s.clientY-t.clientY;return Math[i(185)](e*e+s*s)};["calculateAngle"]=(t,s)=>{var i=a,e=s[i(187)]-t[i(187)],s=s[i(181)]-t[i(181)];return Math[i(211)](s,e)}}return{Ext:new t}})(),t[s(177)].IO={Input:{EventType:n.InputEventTypes,attach:n.Inputs[s(249)][s(218)],release:n.Inputs[s(249)][s(248)],clear:n[s(244)][s(249)][s(202)]},loadJSON:n.IO.loadJSON}})("undefined"!=typeof window?window:global);const _0x2c88b5=_0x369d;function _0x2e1f(){const t=["Assets","get","getAudioElement","755KmFREf","7669809fYyzOv","activeAudios","2850092VKXDFp","Ext","stopAllAudios","preloadAudio","forEach","playAudio","volume","stopAudio","661044nUAYsj","170EwefsY","audioCache","ExtensionType","undefined","path","play","24474uIgRXX","pause","$1S","Application","delete","set","loop","Audio","1124454jXGTlE","1254951JSatxd","3HEhvZZ","getAudio","1605264GnwHOK","add","currentTime"];return(_0x2e1f=function(){return t})()}function _0x369d(t,s){const i=_0x2e1f();return(_0x369d=function(t,s){return t-=168,i[t]})(t,s)}(function(){for(var t=_0x369d,s=_0x2e1f();;)try{if(570656==+parseInt(t(182))*(-parseInt(t(201))/2)+-parseInt(t(180))/3+-parseInt(t(193))/4+-parseInt(t(190))/5*(parseInt(t(172))/6)+parseInt(t(191))/7+-parseInt(t(184))/8+-parseInt(t(181))/9*(-parseInt(t(202))/10))break;s.push(s.shift())}catch(t){s.push(s.shift())}})(),(t=>{const s=_0x369d,i={};i[s(179)]=(()=>{const r=s;class t extends $1S[r(175)][r(168)]{[r(203)]=new Map;[r(192)]=new Set;constructor(){super(0)}["onLoad"]=(t,s,i)=>{i()};[r(198)]=(t,s=!1,i=1)=>{var e=r,t=$1S.Assets[e(183)](t);null!=t&&(t=t[e(170)],t=this[e(189)](t),this[e(192)].has(t)?t[e(186)]=0:this[e(192)][e(185)](t),s&&(t[e(178)]=!0),1!==i&&(t[e(199)]=i),t[e(171)]())};[r(200)]=t=>{var s=r,t=$1S[s(187)][s(183)](t);null!=t&&(t=t.path,t=this[s(203)][s(188)](t))&&this[s(192)].has(t)&&(t[s(173)](),t[s(186)]=0,this[s(192)][s(176)](t))};[r(195)]=()=>{const i=r;this[i(192)][i(197)](t=>{var s=i;t[s(173)](),t[s(186)]=0,this[s(192)][s(176)](t)})};[r(196)]=t=>{this[r(189)](t)};[r(189)]=t=>{var s,i=r;return this[i(203)].has(t)?this[i(203)].get(t):(s=new Audio(t),this[i(203)][i(177)](t,s),s)}}return{Ext:new t}})(),t[s(174)][s(179)]={preload:i.Audio[s(194)].preloadAudio,play:i[s(179)][s(194)].playAudio,stop:i[s(179)][s(194)][s(200)],stopAll:i.Audio.Ext[s(195)]}})(typeof window!==_0x2c88b5(169)?window:global);const _0x50996d=_0x473e;function _0x473e(t,s){const i=_0x294c();return(_0x473e=function(t,s){return t-=315,i[t]})(t,s)}function _0x294c(){const t=["SpritePropType","raiseHideStageEvent","registerProp","onInit","Center","render","tiles","requestFullscreen","setFullScreen","onResize","msExitFullscreen","createElement","ByDepth","anchorTop","stages","clearRect","LowerLeft","fullWindow","activeLoop","updateRegion","sortBy","335gEImWl","setState","workContext","toDataURL","translate","activeStageName","frame","Priority","length","abs","30MPZykD","raiseRenderEvent","newId","getState","destroy","clearProps","None","src","Centered","canvas","frameStart","webkitRequestFullscreen","setRegion","destroyProp","raiseDisposeEvent","raiseResizeEvent","757719qTaEiZ","sizeChange","Canvas context is missing.","24604ncyqMW","frameRate","752640MZuFJu","isVisible","onHideStage","adjustSize","471231QZlGeZ","925282SxVlqn","workCanvas","sortOnRender","Sprite group ","Sprite image ","anchorBottomValue","Stage not found: ","getSize","switchTo","lastFrameUpdateTime","Assets","show","childRegion","screenHeight","findIndex","A sprite group is required.","save","handlePostTickEvent","name","webkitExitFullscreen","Not a StagePropType or TransformType component.","height","anchorRightValue","imageName","register","anchorBottom","getRegion","stageProps","Absolute","width","rotation","keys","innerWidth","onPostDraw","Not a StageType.","framesPerSecond","resize","raiseTickEvent","get","AlignOnEnum","onShowStage","AnchorTypeEnum","undefined","sort","AlignOn","parent","getContext","onTick","An image is required.","CanvasContext","alignOn","sortOnRegister","renderedFrame","Stage not found.","LowerRight","388140jIzsCW","isShown","stagesNames","anchorLeftValue","setRenderSort","SavedState","SpriteType","StageType","child","UpperRight","raiseShowStageEvent","Graphics","getActiveName","ByPriority","rotate","clipPaths","Canvas","find","AnchorTransformType","UpperLeft","Instance","loadImage","Invalid stage name.","onload","Relative","layoutName","getStyle","anchorRight","getProp","loadGroup","onDestroy","addEventListener","SortByTypes"," not found.","handleTickEvent","push","onDraw","492674KBKuzz","exitFullscreen","getTileset","Ext","anchorTopValue","frameTime","Type","drawImage","anchorLeft","compare","onDispose","screenWidth","restore","$1S","groupName","msRequestFullscreen","ExtensionType","Renderer","innerHeight","Layout name invalid.","publish","spriteLoop","getSpriteLoop","Stage already defined.","Helper","initialize"];return(_0x294c=function(){return t})()}function _0x53d8(t,s){const i=_0x1551();return(_0x53d8=function(t,s){return t-=196,i[t]})(t,s)}function _0x1551(){const t=["mass","Debug","raiseResizeEvent","9lEXWot","12LhYnZt","2712372IvPoES","ExtensionType","bounceReduction","onResize","vectorY","lineTo","Type","rotation","4nuYibq","sqrt","onInit","Instance","moveDownStart","isPointInsidePolygon","sort","Application","893794lQCnWL","target","acceleration","Ext","Types","push","backward","stageProps","height","left","Not a PhysicsModifierType component.","295835tskrPp","moveUpStart","undefined","Renderer","1316715dfcSXg","10zazbxF","createCollisionBorderBox","lineWidth","getAbsoluteBorder","thrust","cos","friction","collisionModifiers","140662RduQhx","find","down","moveUpStop","sin","doPolygonsIntersect","No PhysicsBoundType target provided.","moveBackwardStart","frictionCoefficient","forward","takesCollisions","getPhysicsModifier","detectCollisions","physicsModifiers","doPolygonsOverlap","onDestroy","givesCollisions","vectorX2","onCollision","map","abs","RotateTowardsVectorModifier","findIndex","destroyCollisionModifier","newId","raiseCollisionEvent","onCollision not defined.","moveLeftStop","registerPhysicsModifier","isAccelerating","vectorX","collisions","beginPath","some","vectorY2","Physics","thrusts","3uoXsHi","onTick","moveForwardStop","gravity","moveRightStop","1303057MLsKDB","collisionBorder","raiseCollisionCommitEvent","speedCap","Priority","3152152aIlRgG","raiseRenderEvent","strokeStyle","Helper","stroke","filter","moveBackwardStop","get","splice","onTick not implemented.","getCollisionModifier","length","width","doLinesIntersect","clearCollisionModifiers","red","direction","PhysicsBoundType","gravityConstant","rotationSpeed","$1S","raiseTickEvent","right","StagePropType","handlePostTickEvent","Collisions","rotationSpeed2","createCollisionBorderHexagon","active"];return(_0x1551=function(){return t})()}(function(){for(var t=_0x473e,s=_0x294c();;)try{if(233942==+parseInt(t(454))+parseInt(t(399))/2+parseInt(t(398))/3+parseInt(t(392))/4*(-parseInt(t(363))/5)+parseInt(t(373))/6*(-parseInt(t(316))/7)+-parseInt(t(394))/8+parseInt(t(389))/9)break;s.push(s.shift())}catch(t){s.push(s.shift())}})(),(t=>{const x=_0x473e,v={};v[x(333)]=(()=>{const h=x,r={Center:0,UpperLeft:1,UpperRight:2,LowerLeft:3,LowerRight:4},i={ByPriority:0,ByDepth:1},t={ByPriority:{sortOnRegister:!0,sortOnRender:!1,compare:function(t,s){return t[_0x473e(370)]-s.Priority}},ByDepth:{sortOnRegister:!0,sortOnRender:!0,compare:function(t,s){var i=_0x473e;return t.Instance.z-s[i(474)].z}}},e={None:0,Absolute:1,Relative:2,Centered:3};class n{constructor(t,s,i){var e=_0x473e;this.id=$1S[e(340)][e(375)](),this[e(444)]=t,this[e(462)]=s,this[e(411)]=this[e(462)][e(425)](),this.onInit&&this[e(345)](i)}[h(436)](t,s){var i=h;this[i(446)]&&this[i(446)](t,s),this[i(462)].raiseTickEvent(t,s)}[h(374)](t){var s=h;this[s(462)][s(374)](t)}[h(388)](t,s){var i=h;this[i(351)]&&this[i(351)](t,s),this[i(462)][i(374)](t,s)}[h(387)](){var t=h;this[t(462)][t(387)]()}[h(464)](){this[h(462)].raiseShowStageEvent()}["raiseHideStageEvent"](){var t=h;this[t(462)][t(343)]()}}class s extends n{[h(345)](t){var s=h;this[s(324)]=t[s(324)]||e.None,this.anchorLeftValue=t[s(457)]||0,this.anchorRight=t.anchorRight||e[s(379)],this[s(421)]=t[s(421)]||0,this[s(355)]=t[s(355)]||e.None,this[s(320)]=t[s(320)]||0,this[s(424)]=t[s(424)]||e.None,this[s(404)]=t.anchorBottomValue||0,this.updateRegion()}[h(351)](){this[h(361)]()}[h(361)](){var t=h;this[t(324)]==e[t(427)]?(this[t(411)].x1=this[t(457)],this[t(481)]==e[t(379)]&&(this[t(411)].x2=this.childRegion.x1+this.child[t(428)])):this[t(324)]==e[t(478)]?(this[t(411)].x1=this[t(444)].width*(this[t(457)]/100),this[t(481)]==e[t(379)]&&(this.childRegion.x2=this.childRegion.x1+this[t(462)].width)):this[t(324)]==e[t(381)]&&(this[t(411)].x1=this[t(444)][t(428)]/2-this[t(462)].width/2-this.anchorLeftValue,this.anchorRight==e[t(379)])&&(this[t(411)].x2=this[t(411)].x1+this[t(462)][t(428)]),this[t(481)]==e[t(427)]?(this[t(411)].x2=this[t(444)][t(428)]-this[t(421)],this[t(324)]==e.None&&(this.childRegion.x1=this[t(411)].x2-this[t(462)][t(428)])):this[t(481)]==e[t(478)]?(this.childRegion.x2=this[t(444)][t(428)]-this[t(444)][t(428)]*(this.anchorRightValue/100),this[t(324)]==e[t(379)]&&(this[t(411)].x1=this[t(411)].x2-this[t(462)].width)):this[t(481)]==e[t(381)]&&(this.childRegion.x2=this[t(444)][t(428)]-(this.parent[t(428)]/2-this[t(462)][t(428)]/2)+this[t(421)],this[t(324)]==e.None)&&(this[t(411)].x1=this[t(411)].x2-this[t(462)][t(428)]),this[t(355)]==e[t(427)]?(this.childRegion.y1=this.anchorTopValue,this[t(424)]==e[t(379)]&&(this.childRegion.y2=this[t(411)].y1+this.child.height)):this[t(355)]==e.Relative?(this.childRegion.y1=this[t(444)][t(420)]*(this[t(320)]/100),this[t(424)]==e[t(379)]&&(this.childRegion.y2=this[t(411)].y1+this[t(462)].height)):this.anchorTop==e[t(381)]&&(this[t(411)].y1=this[t(444)][t(420)]/2-this[t(462)][t(420)]/2-this[t(320)],this[t(424)]==e[t(379)])&&(this.childRegion.y2=this[t(411)].y1+this[t(462)].height),this.anchorBottom==e.Absolute?(this[t(411)].y2=this[t(444)][t(420)]-this.anchorBottomValue,this.anchorTop==e.None&&(this[t(411)].y1=this.childRegion.y2-this.child[t(420)])):this[t(424)]==e[t(478)]?(this.childRegion.y2=this.parent[t(420)]-this.parent[t(420)]*(this[t(404)]/100),this[t(355)]==e[t(379)]&&(this[t(411)].y1=this[t(411)].y2-this[t(462)][t(420)])):this.anchorBottom==e[t(381)]&&(this[t(411)].y2=this.parent[t(420)]-(this[t(444)][t(420)]/2-this[t(462)][t(420)]/2)+this[t(404)],this[t(355)]==e[t(379)])&&(this[t(411)].y1=this[t(411)].y2-this.child.height),this.child[t(385)](this[t(411)])}}class a{constructor(t=0){var s=h;this.id=$1S[s(340)].newId(),this[s(426)]=[],this[s(362)]?this[s(458)](this[s(362)]):this.setRenderSort(i[s(467)])}[h(458)]=t=>{var s=h;t==i[s(467)]&&(this[s(362)]=v[s(333)][s(486)][s(467)]),t==i[s(354)]&&(this[s(362)]=v[s(333)].SortByTypes[s(354)])};[h(344)]=(t,s={},i=1e5)=>{var e=h;if(t instanceof c||t instanceof n)return t={Instance:t,Properties:s,Priority:i},this[e(426)][e(489)](t),this[e(362)][e(450)]&&this[e(426)][e(442)](this[e(362)][e(325)]),this[e(344)];throw new Error(e(419))};[h(482)]=s=>{const i=h,t=this[i(426)][i(471)](t=>t[i(474)].id===s);return t?t[i(474)]:null};[h(386)]=s=>{var t=h,i=this[t(426)][t(413)](t=>t.Instance.id===s);return-1!==i&&(this[t(426)][i][t(484)]&&this[t(426)][i][t(484)](),this[t(426)].splice(i,1),!0)};[h(378)]=()=>{for(var t=h,s=0;s<this[t(426)][t(371)];s++)this[t(426)][s][t(484)]&&this[t(426)][s][t(484)]();this[t(426)][s]=[]};[h(436)](t,s){var i=h;this[i(446)]&&this[i(446)](t,s);for(var e=0;e<this[i(426)][i(371)];e++)this[i(426)][e].Instance[i(436)](t,s)}[h(374)](t){var s=h;if(this[s(315)]&&this[s(315)](t),0<this.stageProps[s(371)]){this[s(362)][s(401)]&&this[s(426)].sort(this[s(362)][s(325)]);for(var i=0;i<this[s(426)][s(371)];i++)this[s(426)][i][s(474)].raiseRenderEvent&&this[s(426)][i][s(474)].raiseRenderEvent(t)}this[s(432)]&&this[s(432)](t)}[h(388)](t,s){var i=h;this.onResize&&this[i(351)](t,s);for(var e=0;e<this[i(426)][i(371)];e++)this[i(426)][e][i(474)][i(388)](this.width,this[i(420)])}["raiseDisposeEvent"](){var t=h;if(0<this[t(426)][t(371)])for(var s=0;s<this[t(426)][t(371)];s++)this.stageProps[s][t(474)][t(387)]&&this[t(426)][s][t(474)][t(387)]();this.onDispose&&this[t(326)]()}[h(464)](){var t=h;if(0<this[t(426)][t(371)])for(var s=0;s<this[t(426)].length;s++)this[t(426)][s].Instance[t(464)]&&this[t(426)][s][t(474)][t(464)]();this[t(439)]&&this.onShowStage()}[h(343)](){var t=h;if(0<this[t(426)][t(371)])for(var s=0;s<this[t(426)].length;s++)this[t(426)][s][t(474)][t(343)]&&this[t(426)][s][t(474)][t(343)]();this[t(396)]&&this[t(396)]()}}class o extends a{constructor(t,s={}){var i=h,e=(super(),$1S[i(333)][i(465)].getSize());this.width=e[i(428)],this.height=e[i(420)],this[i(417)]=t,$1S[i(333)].register(t,this),this[i(345)]&&this[i(345)](s)}["raiseRenderEvent"]=t=>{var s=h;t.clearRect(0,0,this[s(428)],this[s(420)]),super[s(374)](t),$1S.Renderer[s(465)][s(336)]()};["raiseResizeEvent"](t,s){var i=h;this[i(428)]=t,this[i(420)]=s,super.raiseResizeEvent(t,s)}}class c extends a{constructor(t={},s=!1){var i=h,e=(super(),this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.width=t.width||100,this[i(420)]=t[i(420)]||100,this.rotation=t[i(429)]||0,this[i(395)]=t[i(455)]||!0,this.alignOn=t.alignOn||r[i(346)],$1S[i(333)].Graphics[i(406)]());this[i(327)]=e[i(428)],this[i(412)]=e[i(420)],this.workCanvas=document[i(353)](i(382)),this[i(400)].width=this[i(428)],this.workCanvas[i(420)]=this[i(420)],this[i(365)]=this[i(400)][i(445)]("2d"),!s&&this[i(345)]&&this[i(345)](t)}[h(425)](){var t=h;switch(this[t(449)]){case r.Center:return{x1:this.x-this[t(428)]/2,y1:this.y-this.height/2,x2:this.x+this[t(428)]/2,y2:this.y+this[t(420)]/2};case r[t(473)]:return{x1:this.x,y1:this.y,x2:this.x+this[t(428)],y2:this.y+this.height};case r.UpperRight:return{x1:this.x-this[t(428)],y1:this.y,x2:this.x,y2:this.y+this[t(420)]};case r[t(358)]:return{x1:this.x,y1:this.y-this[t(420)],x2:this.x+this.width,y2:this.y};case r[t(453)]:return{x1:this.x-this[t(428)],y1:this.y-this.height,x2:this.x,y2:this.y};default:return{x1:this.x,y1:this.y,x2:this.x+this[t(428)],y2:this.y+this[t(420)]}}}[h(385)](t){var s=h;switch(this[s(428)]=Math[s(372)](t.x2-t.x1),this[s(420)]=Math[s(372)](t.y2-t.y1),this[s(449)]){case r[s(346)]:this.x=(t.x1+t.x2)/2,this.y=(t.y1+t.y2)/2;break;case r[s(473)]:this.x=t.x1,this.y=t.y1;break;case r[s(463)]:this.x=t.x2,this.y=t.y1;break;case r.LowerLeft:this.x=t.x1,this.y=t.y2;break;case r[s(453)]:this.x=t.x2,this.y=t.y2;break;default:this.x=t.x1,this.y=t.y1}}[h(410)](){this.isVisible=!0}["hide"](){this[h(395)]=!1}[h(374)]=t=>{var s=h;if(this.isVisible){if(null==t)throw new Error(s(391));if(this[s(315)]&&this.onDraw(this.workContext),super[s(374)](this[s(365)]),this[s(432)]&&this[s(432)](this[s(365)]),0!=this[s(429)]){var i=Math.PI/180*this.rotation;t[s(415)](),t[s(367)](this.x,this.y),t[s(468)](i),t[s(367)](-this.width/2,-this[s(420)]/2),t[s(323)](this[s(400)],0,0),t[s(328)]()}else switch(this[s(449)]){case r[s(346)]:t[s(323)](this.workCanvas,this.x-this[s(428)]/2,this.y-this[s(420)]/2);break;case r[s(473)]:t[s(323)](this[s(400)],this.x,this.y);break;case r[s(463)]:t[s(323)](this[s(400)],this.x,this.y-this[s(420)]);break;case r[s(358)]:t.drawImage(this.workCanvas,this.x-this[s(428)],this.y);break;case AlignOn.LowerRight:t[s(323)](this[s(400)],this.x-this[s(428)],this.y-this[s(420)]);break;default:t[s(323)](this[s(400)],this.x-this.width/2,this.y-this[s(420)]/2)}}}}class l extends c{constructor(t={}){var s=h;super(t),this[s(434)]=t[s(434)]||12,this[s(360)]=null,this[s(337)]={},this.frame=t[s(383)]||0,this[s(434)]=t[s(434)]||12,this[s(321)]=1e3/this[s(434)],this[s(390)]=!1,this[s(451)]=-1,this[s(408)]=0,t[s(330)]&&this[s(483)](t.groupName),t[s(422)]&&this[s(475)](t.imageName,1)}[h(483)](t){var s=h;if(!t)throw new Error(s(414));var i=$1S[s(409)][s(338)](t);if(!i)throw new Error(s(402)+t+s(487));this[s(397)](i),this[s(337)][t]=i,this[s(360)]||(this[s(360)]=i)}[h(475)](t,s){var i=h;if(!t)throw new Error(i(447));var e=$1S[i(409)].getImage(t);if(!e)throw new Error(i(403)+t+" not found.");for(var r={group:t,clipPaths:[]},n=0;n<s;n++)r.clipPaths[i(489)]({Canvas:e[i(470)],CanvasContext:e[i(448)]});this.adjustSize(r),this[i(337)][t]=r,this[i(360)]||(this[i(360)]=r)}["adjustSize"](t){for(var s=h,i=!1,e=0;e<t[s(469)][s(371)];e++)this.width<t[s(469)][e].Canvas[s(428)]&&(this[s(428)]=t[s(469)][e][s(470)][s(428)],i=!0),this[s(420)]<t[s(469)][e][s(470)][s(420)]&&(this.height=t[s(469)][e][s(470)][s(420)],i=!0);i&&(this[s(400)][s(428)]=this[s(428)],this[s(400)][s(420)]=this[s(420)],this.workContext=this[s(400)][s(445)]("2d"))}[h(410)](t){var s=h,i=this[s(337)][t];i||(this[s(483)](t),i=this[s(337)][t]),this[s(369)]=0,this[s(360)]=i}[h(446)](t,s){var i=h;this[i(360)]&&this[i(395)]&&1<this[i(360)][i(469)][i(371)]&&t-this[i(408)]>=this[i(321)]&&(this[i(408)]=t,this[i(369)]++,this[i(369)]>=this[i(360)][i(469)].length)&&(this[i(369)]=0)}[h(315)](t){var s,i=h;this.activeLoop&&this.isVisible&&this[i(369)]!=this[i(451)]&&(s=this[i(360)][i(469)][this.frame][i(470)],this[i(360)][i(469)][this[i(369)]][i(448)],t[i(357)](0,0,this[i(400)][i(428)],this.workCanvas.height),t[i(323)](s,0,0),this[i(451)]=this[i(369)])}}class d extends c{constructor(t,s={}){var i=h;if(super(s),!t)throw new Error(i(335));this[i(479)]=t,this[i(348)]=[],this[i(341)]()}[h(341)](){var t=h,s=$1S[t(409)][t(318)](this[t(479)]);if(!s)throw new Error("Layout "+layoutName+t(487));for(var i=0;i<s[t(348)][t(371)];i++){var e=s.tiles[i],e=new $1S[t(333)][t(322)][t(460)]({imageName:e[t(422)],groupName:e[t(330)],framesPerSecond:e[t(393)]||0,framesStart:e[t(383)]||0,x:e.x||0,y:e.y||0,alignOn:e.alignOn||$1S.Renderer[t(322)][t(443)][t(473)]});this[t(344)](e)}}}class u extends $1S.Application[h(332)]{["stages"]={};["activeStageName"]=null;constructor(){super(0)}["onLoad"]=(t,s,i)=>{var e=h;s.canvas&&v.Graphics.initialize(s.canvas,s[e(359)]),i()};[h(466)]=()=>{return this[h(368)]};[h(423)]=(t,s=null)=>{var i=h;if(!t)throw new Error(i(476));if(this[i(356)][t])throw new Error(i(339));if(null==s||!(s instanceof o))throw new Error(i(433));this[i(356)][t]={Name:t,Instance:s,SavedState:null}};[h(388)]=(t,s)=>{var i,e=h;null!=this[e(368)]&&(i=this.stages[this[e(368)]])&&i[e(474)][e(388)](t,s)};[h(374)]=()=>{var t,s,i=h;null!=this[i(368)]&&(t=this[i(356)][this[i(368)]])&&(s=$1S[i(333)][i(465)][i(445)](),t[i(474)][i(374)](s))};[h(437)]=()=>{var t=null;return t=null!=this[h(368)]?this.stages[this.activeStageName]:t};["destroy"]=(t=null)=>{var s=h,i=(t=t||this.activeStageName,this[s(368)]===t&&(this[s(356)][this[s(368)]][s(343)](),this[s(368)]=null),this[s(356)][t]);if(!i)throw new Error(s(452));i[s(387)](),i[s(378)](),delete this[s(356)][t]};["switchTo"]=t=>{var s=h;if(null!=this[s(368)]&&(this[s(356)][this.activeStageName].Instance.raiseHideStageEvent(),this[s(356)][this[s(368)]][s(459)]=$1S[s(333)].Graphics[s(376)]()),null==t)this[s(368)]=null;else{if(!this[s(356)][t])throw new Error(s(405)+t);this[s(368)]=t,null!=this[s(356)][this[s(368)]][s(459)]&&this[s(356)][this[s(368)]][s(459)]&&$1S.Renderer[s(465)].setState(this[s(356)][this[s(368)]][s(459)]),this[s(356)][this.activeStageName][s(474)][s(464)]()}};[h(488)]=(t,s)=>{var i=h;this[i(368)]&&this.stages[this.activeStageName][i(474)][i(436)](t,s)};[h(416)]=(t,s)=>{this.raiseRenderEvent()};["reset"]=()=>{for(var t=h,s=Object[t(430)](this[t(356)]),i=0;i<this[t(456)][t(371)];i++)destroy(s[i]);this[t(356)]={},this.activeStageName=null}}var p=new u;return{AlignOnEnum:r,StageType:o,SortByEnum:i,SortByTypes:t,StagePropType:c,SpritePropType:l,TilesetPropType:d,AnchorTypeEnum:e,AnchorTransformType:s,Ext:p}})(),v.Graphics=(()=>{let e=null,r=null,n=null,h=null,a=!1;return{initialize:(t,s)=>{const i=_0x473e;e=document.getElementById(t),s&&(a=!0,e[i(428)]=window[i(431)],e.height=window.innerHeight),r=e[i(445)]("2d"),(n=document[i(353)](i(382)))[i(428)]=e[i(428)],n[i(420)]=e[i(420)],h=n[i(445)]("2d"),window[i(485)](i(435),()=>{var t=i;a&&(e[t(428)]=window[t(431)],e[t(420)]=window[t(334)],r=e.getContext("2d"),(n=document[t(353)]("canvas"))[t(428)]=e[t(428)],n[t(420)]=e[t(420)],h=n.getContext("2d")),r=e[t(445)]("2d"),(n=document.createElement(t(382)))[t(428)]=e[t(428)],n[t(420)]=e.height,h=n[t(445)]("2d"),v[t(333)].Ext[t(388)](e[t(428)],e[t(420)])})},setFullScreen:t=>{var s=_0x473e;if(t)e[s(349)]?e.requestFullscreen():e[s(384)]?e[s(384)]():e[s(331)]&&e[s(331)](),e[s(428)]=screen.width,e.height=screen.height,r=e[s(445)]("2d"),(n=document[s(353)]("canvas"))[s(428)]=e.width;else{try{document.exitFullscreen?document[s(317)]():document[s(418)]?document[s(418)]():document.msExitFullscreen&&document[s(352)]()}catch{}e[s(428)]=originalWidth,e[s(420)]=originalHeight,r=e[s(445)]("2d"),(n=document[s(353)](s(382)))[s(428)]=e[s(428)]}n[s(420)]=e.height,h=n[s(445)]("2d")},getContext:()=>h,publish:()=>{var t=_0x473e;r[t(357)](0,0,e.width,e[t(420)]),r.drawImage(n,0,0)},getState:()=>{var t=_0x473e;return e[t(366)]()},setState:t=>{const s=_0x473e,i=(r[s(357)](0,0,e[s(428)],e[s(420)]),new Image);i[s(477)]=function(){var t=s;r[t(323)](i,0,0)},i[s(380)]=t},getStyle:()=>e.style,getSize:()=>{var t=_0x473e;return{width:e[t(428)],height:e[t(420)]}}}})(),t[x(329)].Renderer={Type:{AlignOn:v.Renderer[x(438)],SortBy:v[x(333)].SortByEnum,StageType:v[x(333)][x(461)],StagePropType:v[x(333)].StagePropType,SpriteType:v[x(333)][x(342)],TilesetType:v[x(333)].TilesetPropType,Transforms:{AnchorType:v[x(333)][x(440)],AnchorTransform:v[x(333)][x(472)]}},Graphics:{setState:v[x(465)][x(364)],getState:v.Graphics.getState,getContext:v.Graphics[x(445)],getSize:v.Graphics[x(406)],getStyle:v[x(465)][x(480)],publish:v[x(465)][x(336)],setFullScreen:v[x(465)][x(350)]},register:v[x(333)][x(319)][x(423)],render:v[x(333)][x(319)][x(347)],destroy:v.Renderer[x(319)][x(377)],get:v[x(333)][x(319)][x(437)],getActiveName:v[x(333)][x(319)][x(466)],switchTo:v[x(333)][x(319)][x(407)]}})(typeof window!==_0x50996d(441)?window:global);const _0x1c1c2a=_0x53d8;function _0x4304(t,s){const i=_0xc069();return(_0x4304=function(t,s){return t-=416,i[t]})(t,s)}function _0xc069(){const t=["StagePropType","measureText","cursorColor","target","height","74382RRCfZU","slice","1852680Vvjgnj","targetX","TAP","349956PgIOeY","callback","font","setCursorPosition","stateIsDown","MoveToModifer","cursorPosition","preventDefault","isEditable","MOUSE_CLICK","cursorBlinkInterval","fadeOut","onDispose","beginPath","textBaseline","EventType","offsetX","black","LabelControl","transparent","textAlign","onShowStage","40YyhpcO","1532osDocj","365304dLvULF","cursor","alpha","onDraw","startY","onTick","19695mUVQWf","width","Input","sqrt","onInit","registerProp","4CDPRbf","text","state","onLoad","fillRect","onClickHandler","speed","attach","isFocused","px ","length","getXPositionForCursorPosition","workContext","TextBoxControl","pointer","region","textColor","startX","fontFamily","Renderer","Application","830rktjHf","targetAlpha","Type","moveTo","release","abs","targetY","fadeIn","onHideStage","MOUSE_MOVE","middle","lineTo","10296izcucs","KEY_DOWN","fontSize","$1S","strokeStyle","2202ABrsqw","cursorVisible","onClick","stopCursorBlinking","key","getStyle","onRender","fillStyle","147POhiBq","Graphics","26izWXkh","milliSeconds","clearRect","fontBoundingBoxAscent","down","Not a UiType component.","clickTimeout","startCursorBlinking","center","inProgress","backColor","FadeModifer","getRegion","MOUSE_ENTER","MOUSE_LEAVE","default"];return(_0xc069=function(){return t})()}function _0x1840(t,s){var i=_0x2aa0();return(_0x1840=function(t,s){return i[t-=436]})(t,s)}function _0x2aa0(){var t=["3182877XBfsIF","74485cJdGOh","5009632QTbndw","89618rpVigS","1880625CwcdbQ","935568xsREyh","10ihWBeM","198SDRfUX","1855056ftuyiH"];return(_0x2aa0=function(){return t})()}(function(){for(var t=_0x53d8,s=_0x1551();;)try{if(203279==+parseInt(t(288))+parseInt(t(301))/2*(-parseInt(t(217))/3)+-parseInt(t(269))/4*(-parseInt(t(292))/5)+-parseInt(t(260))/6*(parseInt(t(222))/7)+-parseInt(t(227))/8*(-parseInt(t(259))/9)+parseInt(t(293))/10*(-parseInt(t(277))/11)+-parseInt(t(261))/12)break;s.push(s.shift())}catch(t){s.push(s.shift())}})(),(t=>{const p=_0x53d8,x={};x[p(257)]=!0,x[p(215)]=(()=>{const c=p;class e{constructor(t,s={}){var i=_0x53d8;if(!(t instanceof l))throw new Error(i(307));this.id=$1S.Helper[i(204)](),this[i(278)]=t,this[i(271)]&&this[i(271)](s)}[c(218)](t,s){var i=c;throw new Error(i(236))}}class r{constructor(t,s){var i=c;if(!(t instanceof l))throw new Error(i(307));this.id=$1S[i(230)].newId(),this[i(278)]=t,this[i(271)]&&this.onInit(s)}[c(198)](t){var s=c;throw new Error(s(206))}}class l extends $1S[c(291)][c(267)][c(250)]{constructor(t={}){var s=c;super(t,!0),this[s(210)]=t[s(210)]||0,this[s(265)]=t.vectorY||0,this[s(246)]=t[s(246)]||0,this[s(197)]=t.vectorX||0,this.vectorY2=t.vectorY||0,this[s(253)]=t.rotationSpeed||0,this[s(256)]=t[s(256)]||1,this.takesCollisions=t[s(311)]||!1,this.givesCollisions=t[s(196)]||!1,this[s(223)]=t[s(223)]||[],this.physicsModifiers=[],this[s(300)]=[],this[s(211)]=[],this[s(271)]&&this.onInit(t)}[c(208)]=(t,s=100)=>{const i=c;if(!(t instanceof e))throw new Error(i(287));this[i(314)].push({Instance:t,Priority:s}),this.physicsModifiers[i(275)]((t,s)=>t[i(226)]-s[i(226)])};[c(312)]=s=>{var t=c,t=this[t(314)][t(302)](t=>t.Instance.id===s);return t?t.Instance:null};["destroyPhysicsModifier"]=s=>{const e=c,t=this[e(314)][e(202)](t=>t[e(272)].id===s);return-1!==t&&(this[e(314)][i][e(316)]&&this[e(314)][i][e(316)](),this[e(314)][e(235)](t,1),!0)};["clearPhysicsModifiers"]=()=>{for(var t=c,s=0;s<this[t(314)].length;s++)this.physicsModifiers[s][t(316)]&&this[t(314)][s].onDestroy();this[t(314)][s]=[]};["registerCollisionModifier"]=(t,s=100)=>{const i=c;if(!(t instanceof r))throw new Error("Not a CollisionModifierType component.");this[i(300)].push({Instance:t,Priority:s}),this[i(300)][i(275)]((t,s)=>t[i(226)]-s[i(226)])};[c(237)]=s=>{const i=c,t=this[i(300)].find(t=>t[i(272)].id===s);return t?t[i(272)]:null};[c(203)]=s=>{const e=c,t=this[e(300)].findIndex(t=>t[e(272)].id===s);return-1!==t&&(this[e(300)][i][e(316)]&&this[e(300)][i][e(316)](),this[e(300)][e(235)](t,1),!0)};[c(241)]=()=>{for(var t=c,s=0;s<this[t(300)][t(238)];s++)this.collisionModifiers[s].onDestroy&&this.collisionModifiers[s][t(316)]();this[t(300)][s]=[]};[c(248)](t,s){var i=c;super[i(248)](t,s);for(var e=0;e<this[i(314)][i(238)];e++)this[i(314)][e][i(272)].onTick(t,s);this.x+=this[i(210)]*s,this.y+=this.vectorY*s,this.rotation+=this[i(246)]*s}[c(258)]=(t,s)=>{var i=c;super.raiseResizeEvent(t,s);for(var e=0;e<this[i(314)].length;e++)this[i(314)][e][i(264)]&&this[i(314)][e][i(272)][i(264)](t,s)};[c(205)](t){var s=c;this[s(198)]&&this[s(198)](t),this[s(197)]=this.vectorX,this[s(214)]=this[s(265)],this.rotationSpeed2=this.rotationSpeed;for(var i=0;i<this[s(300)][s(238)];i++)this[s(300)][i].Instance[s(198)](t);for(i=0;i<this[s(284)].length;i++)this[s(284)][i][s(272)][s(205)]&&this[s(284)][i].Instance[s(205)](t)}[c(224)](){var t=c;this[t(210)]=this[t(197)],this[t(265)]=this[t(214)],this[t(246)]=this[t(253)];for(var s=0;s<this[t(284)][t(238)];s++)stageProps[s].Instance[t(224)]&&this[t(284)][s][t(272)][t(224)](collisionObjects)}[c(228)](s=null){var i=c;if(x[i(257)]&&this[i(223)]){var e=$1S.Physics[i(252)][i(296)](this.x,this.y,this[i(223)]);s[i(229)]=i(242),s[i(295)]=1,s[i(212)](),s.moveTo(e[0].x,e[0].y);for(let t=1;t<e.length;t++)s[i(266)](e[t].x,e[t].y);s.closePath(),s[i(231)]()}super[i(228)](s)}}class t extends e{[c(271)](t){var s=c;this[s(297)]=t[s(279)],this[s(225)]=t[s(225)],this.thrusts={up:!1,down:!1,left:!1,right:!1,forward:!1,backward:!1}}[c(209)](){var t=c;return this[t(216)].up||this.thrusts.down||this[t(216)][t(286)]||this[t(216)][t(249)]||this[t(216)][t(310)]||this[t(216)][t(283)]}["moveForwardStart"](){var t=c;this.thrusts[t(310)]=!0}[c(308)](){this.thrusts.backward=!0}[c(289)](){this[c(216)].up=!0}[c(273)](){this[c(216)].down=!0}["moveLeftStart"](){var t=c;this[t(216)][t(286)]=!0}["moveRightStart"](){var t=c;this[t(216)][t(249)]=!0}[c(219)](){var t=c;this.thrusts[t(310)]=!1}[c(233)](){var t=c;this[t(216)][t(283)]=!1}[c(304)](){this[c(216)].up=!1}["moveDownStop"](){this[c(216)].down=!1}[c(207)](){var t=c;this[t(216)][t(286)]=!1}[c(221)](){var t=c;this[t(216)][t(249)]=!1}[c(218)](t,s){var i,e,r=c;let n=0;this[r(216)].up&&n++,this[r(216)][r(303)]&&n++,this[r(216)][r(286)]&&n++,this.thrusts[r(249)]&&n++,this.thrusts.forward&&n++,this.thrusts[r(283)]&&n++,0<n&&(i=this.thrust/n,this.thrusts.up&&(this[r(278)][r(265)]-=i),this[r(216)][r(303)]&&(this[r(278)].vectorY+=i),this.thrusts[r(286)]&&(this.target[r(210)]-=i),this[r(216)][r(249)]&&(this[r(278)][r(210)]+=i),this[r(216)][r(310)]&&(e=this[r(278)][r(268)]*(Math.PI/180),this[r(278)][r(210)]+=i*Math[r(298)](e),this[r(278)][r(265)]+=i*Math.sin(e)),this[r(216)][r(283)]&&(e=this.target.rotation*(Math.PI/180),this[r(278)].vectorX-=i*Math[r(298)](e),this[r(278)][r(265)]-=i*Math[r(305)](e)),0<this[r(225)])&&(i=Math[r(270)](this[r(278)][r(210)]**2+this.target[r(265)]**2))>this.speedCap&&(e=this[r(225)]/i,this[r(278)].vectorX*=e,this[r(278)][r(265)]*=e)}}class s extends e{["onInit"](t){var s=c;this.friction=t[s(309)]}[c(218)](t,s){var i=c,e=0<this.target.vectorX?-1:1,r=0<this[i(278)].vectorY?-1:1,e=Math[i(200)](this[i(278)][i(210)])*this.friction*s*e,s=Math.abs(this.target[i(265)])*this[i(299)]*s*r;Math.abs(e)>Math[i(200)](this[i(278)][i(210)])?this.target.vectorX=0:this[i(278)][i(210)]+=e,Math[i(200)](s)>Math[i(200)](this[i(278)][i(265)])?this.target[i(265)]=0:this.target[i(265)]+=s}}(class{[e](){}});class n extends e{[c(271)](t){var s=c;this.gravityConstant=t[s(245)]}[c(218)](t,s){for(var i=c,e=$1S[i(291)].get().Instance[i(284)],r=0;r<e[i(238)];r++){var n,h,a,o=e[r][i(272)];o instanceof l&&(a=o[i(256)],n=o.x,h=o.y,o.id!==this.target.id)&&(o=n-this[i(278)].x,n=h-this[i(278)].y,0!=(h=Math[i(270)](o*o+n*n)))&&(o=(a=this[i(245)]*a/h)*o/h,a=a*n/h,this[i(278)].vectorX+=o*s,this[i(278)][i(265)]+=a*s)}}}class h extends e{[c(271)](t){var s=c;this[s(239)]=t[s(239)],this[s(285)]=t[s(285)],this[s(263)]=t[s(263)]}["onTick"](t,s){var i=c;this.target.x-this.target[i(239)]/2<0?(this[i(278)].x=this[i(278)][i(239)]/2,this.target[i(210)]=-this[i(278)][i(210)]):this[i(278)].x+this[i(278)][i(239)]/2>this[i(239)]&&(this.target.x=this[i(239)]-this[i(278)].width/2,this[i(278)].vectorX=-this[i(278)][i(210)]),this[i(278)].y-this[i(278)][i(285)]/2<0?(this[i(278)].y=this[i(278)].height/2,this[i(278)][i(265)]=-this[i(278)][i(265)]):this[i(278)].y+this[i(278)][i(285)]/2>this[i(285)]&&(this[i(278)].y=this[i(285)]-this.target[i(285)]/2,this[i(278)].vectorY=-this[i(278)][i(265)]+this[i(263)],0<this.target[i(265)])&&(this[i(278)][i(265)]=0)}}class a extends e{[c(271)](t){var s=c;this[s(239)]=t[s(239)],this[s(285)]=t[s(285)]}["onTick"](t,s){var i=c;this[i(278)].x<-this[i(278)][i(239)]/2?this[i(278)].x=this[i(239)]+this[i(278)][i(239)]/2:this[i(278)].x>this[i(239)]+this.target[i(239)]/2&&(this[i(278)].x=-this.target[i(239)]/2),this.target.y<-this[i(278)][i(285)]/2?this[i(278)].y=this[i(285)]+this[i(278)].height/2:this[i(278)].y>this.height+this[i(278)][i(285)]/2&&(this[i(278)].y=-this[i(278)][i(285)]/2)}}(class{[e](){}});class o extends r{[c(198)](s){var i=c;for(let t=0;t<s.length;t++){var e=s[t],r=this[i(278)][i(256)]+e[i(256)],n=(this[i(278)].mass-e[i(256)])/r*this[i(278)][i(197)]+2*e[i(256)]/r*e[i(210)],r=(this[i(278)][i(256)]-e[i(256)])/r*this.target[i(214)]+2*e[i(256)]/r*e.vectorY;this[i(278)][i(197)]=n,this[i(278)][i(214)]=r}}}class d extends $1S[c(276)][c(262)]{constructor(){super(0)}["onLoad"]=(t,s,i)=>{i()};[c(251)]=(t,s)=>{this[c(313)]()};[c(313)]=()=>{const i=c,t=$1S[i(291)][i(234)]();if(t){var s=[],e=t.Instance[i(284)][i(232)](t=>t[i(272)]instanceof $1S[i(215)][i(281)][i(244)]&&t[i(272)][i(196)]);for(const r of t.Instance.stageProps[i(232)](t=>t[i(272)]instanceof $1S[i(215)][i(281)][i(244)]&&t.Instance[i(311)])){const n=this[i(296)](r[i(272)].x+r[i(272)][i(239)]/2,r.Instance.y+r[i(272)][i(285)]/2,r[i(272)][i(223)]),h=e[i(232)](t=>r[i(272)].id!==t.Instance.id)[i(232)](t=>this.doPolygonsIntersect(n,this[i(296)](t.Instance.x+t[i(272)][i(239)]/2,t.Instance.y+t[i(272)].height/2,t[i(272)][i(223)])))[i(199)](t=>t[i(272)]),a=h.filter(t=>!r[i(272)][i(211)].includes(t.id));r[i(272)][i(211)]=[...new Set([...r[i(272)][i(211)][i(232)](s=>h[i(213)](t=>t.id===s)),...h.map(t=>t.id)])],0<a[i(238)]&&(s[i(282)](r),r.Instance[i(205)](a))}for(const o of s)o.Instance[i(224)]()}};[c(296)]=(s,i,e)=>{var r=c,n=[];for(let t=0;t<e[r(238)];t++){var h=s+e[t].x,a=i+e[t].y;n.push({x:h,y:a})}return n};[c(294)]=(t,s)=>[{x:t/2,y:-s/2},{x:t/2,y:s/2},{x:-t/2,y:s/2},{x:-t/2,y:-s/2}];[c(254)]=(t,s)=>[{x:-(t/2+2),y:0},{x:-(t/4+1),y:s/2+1},{x:t/4+1,y:s/2+1},{x:t/2+2,y:0},{x:t/4+1,y:-(s/2+1)},{x:-(t/4+1),y:-(s/2+1)}];[c(306)]=(s,i)=>{var e=c;for(let t=0;t<s[e(238)];t++){var r=s[t],n=t===s[e(238)]-1?s[0]:s[t+1];for(let t=0;t<i.length;t++){var h=i[t],a=t===i.length-1?i[0]:i[t+1];if(this[e(240)](r,n,h,a))return!0}}return!(!this[e(274)](s[0],i)&&!this[e(274)](i[0],s))};["doLinesIntersect"]=(t,s,i,e)=>{const r=s.x-t.x,n=s.y-t.y,h=e.x-i.x,a=e.y-i.y,o=r*a-n*h;return 0!=o&&(s=i.x-t.x,e=i.y-t.y,i=(s*a-e*h)/o,t=(s*n-e*r)/o,0<=i)&&i<=1&&0<=t&&t<=1};[c(274)]=(i,e)=>{var r=c;let n=!1;for(let t=0,s=e[r(238)]-1;t<e[r(238)];s=t++){var h=e[t],a=e[s];h.y>i.y!=a.y>i.y&&i.x<(a.x-h.x)*(i.y-h.y)/(a.y-h.y)+h.x&&(n=!n)}return n}}var u=new d;return{PhysicsBoundType:l,ThrustModifer:t,EnvironmentalGravityModifier:class extends e{["onInit"](t){var s=c;this[s(220)]=t.gravity,this[s(243)]=t.direction}["onTick"](t,s){var i=c,e=this[i(243)].x*this[i(220)]*s,s=this[i(243)].y*this[i(220)]*s;this[i(278)].vectorX+=e,this[i(278)][i(265)]+=s}},GravitationalAttractionModifier:n,FrictionModifier:s,BounceModifier:h,WrapAroundModifier:a,RotateTowardsVectorModifier:class extends e{["onInit"](t){var s=c;this[s(255)]=!0,this[s(246)]=t[s(246)]}["onTick"](t,s){var i,e=c;this[e(255)]&&(i=180*Math.atan2(this[e(278)][e(265)],this[e(278)][e(210)])/Math.PI,this[e(278)].rotationSpeed=0,this.target[e(268)]=i)}},BounceCollision:o,Ext:u}})(),t[p(247)][p(215)]={Types:{PhysicsBoundType:x[p(215)][p(244)]},Motion:{Thrust:x[p(215)].ThrustModifer,Friction:x[p(215)].FrictionModifier,EnvironmentalGravity:x.Physics.EnvironmentalGravityModifier,GravitationalAttraction:x[p(215)].GravitationalAttractionModifier,Bounce:x[p(215)].BounceModifier,WrapAround:x[p(215)].WrapAroundModifier,RotateTowardsVector:x.Physics[p(201)]},Collisions:{Modifiers:{Bounce:x.Physics.BounceCollision},createBox:x[p(215)].Ext[p(294)],createHexagon:x[p(215)][p(280)][p(254)],getAbsoluteBorder:x[p(215)][p(280)][p(296)]},Spacial:{doPolygonsIntersect:x[p(215)][p(280)][p(306)],doLinesIntersect:x[p(215)][p(280)].doLinesIntersect,isPointInsidePolygon:x.Physics[p(280)][p(315)]}}})(typeof window!==_0x1c1c2a(290)?window:global),function(){for(var t=_0x4304,s=_0xc069();;)try{if(526981==+parseInt(t(430))*(-parseInt(t(436))/2)+parseInt(t(474))/3*(parseInt(t(423))/4)+parseInt(t(422))/5*(-parseInt(t(510))/6)+-parseInt(t(482))/7*(-parseInt(t(424))/8)+parseInt(t(469))/9*(parseInt(t(457))/10)+parseInt(t(505))/11+parseInt(t(507))/12*(-parseInt(t(484))/13))break;s.push(s.shift())}catch(t){s.push(s.shift())}}(),(t=>{var s=_0x4304,i={};i.UI=(()=>{const h=_0x4304;class r extends $1S[h(455)][h(459)][h(500)]{constructor(t={}){var s=h;super(t),this[s(494)]=t.backColor||s(419),this.textColor=t.textColor||"black",this[s(471)]=t[s(471)]||16,this[s(454)]=t[s(454)]||"Arial",this.textAlign=t.textAlign||"left",this[s(444)]=!1,this[s(434)]&&this.onInit(t)}[h(435)]=(t,s=0,i=0)=>{var e=h;if(!(t instanceof r))throw new Error(e(489));super[e(435)](t,{},i+1e5)};["onDraw"](t){var s=h;t[s(486)](0,0,this[s(431)],this[s(504)]),t[s(481)]=this.backColor,t[s(440)](0,0,this[s(431)],this.height)}}class t extends r{[h(434)](t){var s=h;this[s(437)]=t.text||"",this.isEditable=void 0===t[s(518)]||t[s(518)],this[s(516)]=0,this[s(520)]=null,this[s(475)]=!1,this[s(502)]=t[s(502)]||s(417),this.region=this[s(496)]()}[h(421)](){const i=h,t=this[i(451)];$1S.IO.Input[i(443)]($1S.IO[i(432)][i(525)][i(466)],this.id,t=>{var s=i;return $1S[s(455)][s(483)].getStyle()[s(425)]=s(450),!0},100,t),$1S.IO.Input.attach($1S.IO[i(432)][i(525)][i(497)],this.id,t=>{var s=i;return $1S[s(455)][s(483)][s(479)]()[s(425)]="pointer",!0},100,t),$1S.IO[i(432)][i(443)]($1S.IO[i(432)][i(525)][i(498)],this.id,t=>{var s=i;return $1S[s(455)][s(483)][s(479)]().cursor=s(499),!0},100,t),$1S.IO[i(432)][i(443)]($1S.IO.Input[i(525)][i(519)],this.id,t=>{var s=i;return this[s(444)]=!0,this[s(513)](t[s(416)]),this.startCursorBlinking(),!0},100,t),$1S.IO[i(432)].attach($1S.IO[i(432)][i(525)][i(509)],this.id,t=>{var s=i;return this.isFocused=!0,this[s(513)](t[s(416)]),this[s(491)](),!0},100,t),$1S.IO[i(432)].attach($1S.IO[i(432)].EventType.MOUSE_CLICK_OUT,this.id,t=>{var s=i;return this.isFocused=!1,this[s(477)](),!0},100,t),$1S.IO.Input.attach($1S.IO[i(432)].EventType.TAP_OUT,this.id,t=>{return this[i(444)]=!1,this.stopCursorBlinking(),!0},100,t),$1S.IO[i(432)][i(443)]($1S.IO[i(432)].EventType[i(470)],this.id,t=>{var s=i;if(this[s(518)]&&this[s(444)])switch(t[s(517)](),t.keyCode){case 8:0<this[s(516)]&&(this[s(437)]=this[s(437)][s(506)](0,this.cursorPosition-1)+this.text.slice(this[s(516)]),this[s(516)]--);break;case 46:this.cursorPosition<this[s(437)][s(446)]&&(this.text=this[s(437)].slice(0,this[s(516)])+this[s(437)][s(506)](this[s(516)]+1));break;case 37:0<this[s(516)]&&this[s(516)]--;break;case 39:this[s(516)]<this[s(437)][s(446)]&&this[s(516)]++;break;default:1===t[s(478)].length&&(this[s(437)]=this[s(437)][s(506)](0,this[s(516)])+t.key+this[s(437)][s(506)](this[s(516)]),this[s(516)]++)}return!0})}[h(465)](){this.onDispose()}["onDispose"](){var t=h;$1S[t(455)][t(483)][t(479)]()[t(425)]=t(499),$1S.IO[t(432)][t(461)](this.id)}[h(427)](t){var s,i,e=h,r=(t[e(486)](0,0,this[e(431)],this[e(504)]),t[e(481)]=this[e(494)],t[e(440)](0,0,this.width,this.height),t[e(512)]=this.fontSize+e(445)+this[e(454)],t[e(481)]=this[e(452)],t[e(524)]="middle",t[e(501)](this[e(437)])),r=r[e(487)]+r.fontBoundingBoxDescent;t.fillText(this[e(437)],0,this.height/2),this.isEditable&&this[e(444)]&&this[e(475)]&&(s=this[e(447)](this[e(516)]),i=this[e(504)]/2-r/2,t[e(473)]=this[e(502)],t[e(523)](),t[e(460)](s,i),t[e(468)](s,i+r),t.stroke())}[h(513)](t){var s=h,i=t-this[s(451)].x1;let e=1/0,r=0;for(let t=0;t<=this[s(437)][s(446)];t++){var n=Math[s(462)](this.getXPositionForCursorPosition(t)-i);n<e&&(e=n,r=t)}this[s(516)]=r}[h(447)](t){var s=h,t=this[s(437)].slice(0,t);return this[s(448)][s(501)](t)[s(431)]}[h(491)](){const s=h;this[s(475)]=!0,this[s(520)]=setInterval(()=>{var t=s;this[t(475)]=!this[t(475)]},500)}[h(477)](){var t=h;this.isFocused=!1,clearInterval(this[t(520)]),this.cursorBlinkInterval=null,this[t(475)]=!1}}class s extends r{[h(434)](t){this[h(437)]=t.text||""}["onDraw"](t){var s,i=h;super.onDraw(t),t[i(512)]=this[i(471)]+i(445)+this[i(454)],t.fillStyle=this.textColor,t[i(524)]=i(467),this[i(420)]==i(492)?(s=t[i(501)](this[i(437)])[i(431)],t.fillText(this[i(437)],(this.width-s)/2,this.height/2,this.width)):"right"==this.textAlign?(s=t[i(501)](this.text)[i(431)],t.fillText(this.text,this.width-s,this[i(504)]/2,this[i(431)])):t.fillText(this[i(437)],0,this.height/2,this[i(431)])}}class i extends r{[h(434)](t){var s=h;this[s(437)]=t[s(437)]||"",this[s(441)]=t[s(476)]||null,this.state=null,this[s(514)]=!1}[h(421)](){const i=h,t=this.getRegion();$1S.IO[i(432)][i(443)]($1S.IO[i(432)][i(525)][i(466)],this.id,t=>{var s=i;return $1S[s(455)][s(483)][s(479)]()[s(425)]=s(450),!0},100,t),$1S.IO[i(432)][i(443)]($1S.IO[i(432)][i(525)].MOUSE_ENTER,this.id,t=>{var s=i;return $1S[s(455)].Graphics.getStyle()[s(425)]=s(450),!0},100,t),$1S.IO.Input[i(443)]($1S.IO[i(432)].EventType[i(498)],this.id,t=>{var s=i;return $1S.Renderer[s(483)][s(479)]()[s(425)]=s(499),!0},100,t),$1S.IO[i(432)].attach($1S.IO[i(432)][i(525)][i(519)],this.id,t=>{const s=i;return this.state=s(488),this[s(441)]&&(this.clickTimeout&&clearTimeout(this[s(490)]),this[s(490)]=setTimeout(()=>{var t=s;this[t(441)](this),this[t(490)]=null},100)),!0},100,t),$1S.IO.Input[i(443)]($1S.IO.Input[i(525)][i(509)],this.id,t=>{const s=i;return this[s(441)]&&(this[s(490)]&&clearTimeout(this[s(490)]),this.clickTimeout=setTimeout(()=>{var t=s;this[t(441)](this),this[t(490)]=null},100)),!0},100,t),$1S.IO[i(432)][i(443)]($1S.IO.Input.EventType.MOUSE_UP,this.id,t=>{var s=i;return this[s(514)]&&(this[s(438)]="up"),!0},100,t)}["onHideStage"](){this[h(522)]()}[h(427)](t){var s=h,i=(super[s(427)](t),t[s(512)]=this[s(471)]+s(445)+this[s(454)],t[s(481)]=this[s(452)],t[s(524)]=s(467),this[s(438)]==s(488)?(this.x+=2,this.y+=2,this[s(438)]=null,this[s(514)]=!0):"up"==this.state&&(this.x-=2,this.y-=2,this.state=null,this.stateIsDown=!1),t[s(501)](this[s(437)])[s(431)]);t.fillText(this[s(437)],(this[s(431)]-i)/2,this[s(504)]/2,this[s(431)])}[h(522)](){var t=h;$1S[t(455)].Graphics[t(479)]().cursor=t(499),$1S.IO[t(432)][t(461)](this.id)}}class e{constructor(t){var s=h;this.target=t,this.speed=0,this[s(485)]=0,this.startX=0,this[s(428)]=0,this[s(508)]=0,this[s(463)]=0,this[s(511)]=null}[h(480)](t){}["moveToPosition"](t,s,i,e){var r=h,t=(this[r(453)]=this.target.x,this[r(428)]=this[r(503)].y,this.targetX=t,this.targetY=s,this[r(485)]=i,Math[r(433)]((t-this[r(503)].x)**2+(s-this[r(503)].y)**2));this[r(442)]=t/i,this.callback=e}[h(429)](t,s){var i,e,r,n=h;this[n(503)].x==this[n(508)]&&this.target.y==this.targetY||(s=s,e=this[n(508)]-this[n(503)].x,r=this.targetY-this[n(503)].y,0<(i=Math[n(433)](e**2+r**2))&&(i<=(s=this[n(442)]*s)?(this[n(503)].x=this[n(508)],this[n(503)].y=this.targetY,this[n(442)]=0,this[n(511)]&&this[n(511)]()):(e=e/i*s,r=r/i*s,this[n(503)].x+=e,this[n(503)].y+=r)))}}(class{[(h(464),h(521),h(480),h(429))](){}});class n extends $1S[h(456)].ExtensionType{constructor(){super(0)}[h(439)]=(t,s,i)=>{i()};[h(429)]=(t,s)=>{throw new Error("onTick not implemented")}}var a=new n;return{UiType:r,MoveToModifer:e,LabelControl:s,TextBoxControl:t,ButtonControl:i,Ext:a}})(),t[s(472)].UI={UiType:i.UI.UiType,Animate:{moveTo:i.UI[s(515)],fade:i.UI[s(495)]},Controls:{TextBox:i.UI[s(449)],Button:i.UI.ButtonControl,Label:i.UI[s(418)]}}})("undefined"!=typeof window?window:global),!function(){for(var t=_0x1840,s=_0x2aa0();;)try{if(340587==+parseInt(t(438))*(parseInt(t(444))/2)+-parseInt(t(436))/3+-parseInt(t(437))/4+parseInt(t(442))/5*(-parseInt(t(439))/6)+parseInt(t(440))/7+parseInt(t(443))/8+parseInt(t(441))/9)break;s.push(s.shift())}catch(t){s.push(s.shift())}}();
