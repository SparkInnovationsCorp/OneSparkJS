/**
 * OneSparkJS JavaScript Game Engine
 * Version 1.0.0.0
 * Created by Jason Bramble
 * Copyright (c) 2023 Spark Innovations Corp
 * Licensed under the OneSparkJS License Agreement
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy of this software
 * and associated documentation files (the "Software"), to use, copy, modify, and distribute the Software
 * in non-commercial projects subject to the following conditions:
 *
 * - The above copyright notice and this permission notice shall be included in all copies or substantial
 *   portions of the Software.
 * - Credit shall be given to "OneSparkJS by Spark Innovations Corp" in any accompanying documentation or README file.
 *
 * Permission is also granted to use, copy, modify, and distribute the Software in commercial or revenue-generating
 * projects with the explicit permission of Spark Innovations Corp. To request permission, please contact us
 * at support@sparkinnovationscorp.com.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED
 * TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL
 * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF
 * CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 */
function _0x4697(t,s){const e=_0x20ce();return(_0x4697=function(t,s){return t-=203,e[t]})(t,s)}const _0x2d5ae3=_0x4697;function _0x20ce(){const t=["isArray","open","include","1.0.0","Errors loading files: ","send","push","Module","startsWith","No files to load","endsWith","Parent","length","getTypeAsync","handlePostTickEvent","newId","charAt","toLowerCase","includes","GET","247uOSFqH","\n}\nfactory();","undefined","error","substring","onLoad","http://","884fGTHyY",', "',"3623410zCGCFx","forEach","slice","Alias","sort","Priority","replace","reset","floor","onerror","join","splice","1088248TlDWGj","Instance","get","onTick","stack","Application","log","$1S.include(","startClock","registerType","https://","289302PHblHl","4409904egTlsl","status","91zGjQjW","some","registerExtension","href","Helper","MainApp"," not found","pathname","All extensions loaded.","All files loaded successfully","main.js","function","onStop","onload","stopClock","load","getType","ExtensionType","toString","7736373pNGyXa","statusText","find","requestAnimationFrame","indexOf","clear","$1S","Error: obj is not an instance of ApplicationExtensionType","Type with alias ","split","447680WPRfNk","onStart"];return(_0x20ce=function(){return t})()}function _0x5068(t,s){var e=_0x1127();return(_0x5068=function(t,s){return e[t-=125]})(t,s)}function _0x1127(){var t=["canvas","onLoad","closePath","Canvas","assetSheet","send","Error loading asset sheet","21bfqwAi","GET","CanvasContext","getAudio","parse","createElement","Application","getSpriteLoop","assets.json","red","group","status","beginPath","height","preload","images","name","694920BirXYI","path","516339bdjmbA","clipPath","layouts","loops","log","push","isArray","2214656zUGDGc","max","length","responseText","clipPaths","Audio","2782764yJneCg","getContext","preloadImage","getImage","onload","3jTcUQb","min","getTileset","Ext","audio","Assets","statusText","$1S","1112332CWHJYk","width","533128rIBqJV","1471385mzMBkn"];return(_0x1127=function(){return t})()}(function(){for(var t=_0x4697,s=_0x20ce();;)try{if(386733==-parseInt(t(226))*(parseInt(t(233))/2)+parseInt(t(258))/3+parseInt(t(247))/4+-parseInt(t(235))/5+-parseInt(t(259))/6+parseInt(t(261))/7*(parseInt(t(204))/8)+parseInt(t(280))/9)break;s.push(s.shift())}catch(t){s.push(s.shift())}})(),(_0x368cf=>{const _0x31da97=_0x4697,_0x23f68a={};_0x23f68a.Application=(()=>{const l=_0x4697,t=l(209);let s=0,n=!1,h=null,d=[];class i{constructor(t=0){const e=l;d[e(212)]({Instance:this,Priority:t}),d.sort((t,s)=>t[e(240)]-s.Priority)}}const u=async()=>{var t=l,s=await $1S.getTypeAsync(t(266));s?((h=new s)[t(205)]&&h[t(205)](),e()):console[t(229)]("Application not defined.")},e=()=>{s=0,n=!0,window.requestAnimationFrame(a)},a=e=>{const i=l;let r=e-s;h&&(h[i(250)]&&h[i(250)](e,r),d.forEach(t=>{var s=i;t[s(248)].handleTickEvent&&t[s(248)].handleTickEvent(e,r)}),d.forEach(t=>{var s=i;t[s(248)][s(220)]&&t[s(248)][s(220)](e,r)}),h.onPostTick)&&h.onPostTick(e,r),s=e,n&&window[i(283)](a)},r=()=>{n=!1};return{ExtensionType:i,version:t,load:(t,r={},n=null)=>{const s=l;t[s(216)]("/")||(t+="/");{var e=t,i=r,h=()=>{const i=s;console[i(253)](i(269)),$1S[i(208)](t+i(271),null,(t,s)=>{var e=i;t?(r.autoStart&&u(),n&&n()):console[e(229)](s)})};const c=l;var a=d[c(218)],o=0;d[c(236)](t=>{var s=c;t.Instance[s(231)]&&t[s(248)][s(231)](e,i,()=>{++o===a&&h()})})}},start:u,stop:async()=>{var t=l;h[t(273)]&&h[t(273)](),r(),$1S.Renderer.Graphics[t(285)](),OneStartJS.Stage[t(242)]()},get:()=>h,tick:a,startClock:e,stopClock:r,registerExtension:(t,s=0)=>{const e=l;t instanceof i?(d.push({Instance:t,Priority:s}),d[e(239)]((t,s)=>t.Priority-s[e(240)])):console[e(229)](e(287))}}})(),_0x23f68a[_0x31da97(265)]={newId:()=>{var s=_0x4697;let e="";for(let t=0;t<32;t++)e+=Math[s(243)](16*Math.random())[s(279)](16),7!==t&&11!==t&&15!==t&&19!==t||(e+="-");return e}},_0x23f68a[_0x31da97(213)]=(()=>{let _0x59314c=[],_0x4e0722=[],_0x2b2823=[],_0x5e7360=[];const _0x8ef3ff=(_0x160d57,_0x21badb=null,_0x3c4cb7=null)=>{const _0x4cbf60=_0x4697;if("string"==typeof _0x160d57)_0x160d57=[_0x160d57];else if(!Array[_0x4cbf60(206)](_0x160d57))return void(typeof _0x3c4cb7===_0x4cbf60(272)&&_0x3c4cb7(!1,"Error: 'files' parameter must be an array or a string"));const _0x3d7752=null==_0x21badb?_0x599a2e():_0x21badb,_0x2f59fa=_0x3d7752[_0x4cbf60(241)](/\/[^\/]+$/,"")+"/",_0xd059c2=_0x482f3b=>{const _0x514fd9=_0x4cbf60,_0x327912=_0x1d6a2b(_0x482f3b,_0x2f59fa),_0x309405=_0x2b2823[_0x514fd9(262)](t=>t[_0x514fd9(217)]===_0x3d7752&&t.Child===_0x482f3b);if(_0x309405||_0x2b2823[_0x514fd9(212)]({Parent:_0x3d7752,Child:_0x482f3b}),!_0x59314c[_0x514fd9(224)](_0x482f3b)){if(_0x4e0722[_0x514fd9(224)](_0x482f3b)){const _0x532cf0=_0x4e0722[_0x514fd9(284)](_0x482f3b);-1<_0x532cf0&&_0x4e0722[_0x514fd9(246)](_0x532cf0,1)}var _0x46ef22=new XMLHttpRequest;_0x46ef22[_0x514fd9(207)](_0x514fd9(225),_0x327912,!0),_0x46ef22[_0x514fd9(274)]=function(){const _0x47189a=_0x514fd9;if(200===_0x46ef22[_0x47189a(260)]){var _0x118f36=_0x46ef22.responseText,_0x118f36=_0x5edd74(_0x118f36,_0x327912);_0x118f36="async function factory() {\n"+_0x118f36+_0x47189a(227);try{eval(_0x118f36),_0x8ab336++,_0x59314c[_0x47189a(224)](_0x482f3b)||_0x59314c.push(_0x482f3b),_0x101450()}catch(_0x7707ca){console.error("Error evaluating script in "+_0x327912+":",_0x7707ca),_0x44fac3++,_0x4e0722[_0x47189a(212)](_0x482f3b),_0x101450()}}},_0x46ef22[_0x514fd9(244)]=function(){var t=_0x514fd9;console.error("Error evaluating script in "+_0x327912+":",_0x46ef22[t(281)]),_0x44fac3++,_0x4e0722[t(212)](_0x482f3b),_0x101450()},_0x46ef22[_0x514fd9(211)]()}};let _0x8ab336=0,_0x44fac3=0,_0x2743aa=[];const _0x101450=()=>{var t,s=_0x4cbf60;_0x8ab336+_0x44fac3===_0x160d57.length&&(s=(t=0===_0x44fac3)?s(270):s(210)+_0x2743aa[s(245)]("; "),_0x3c4cb7)&&_0x3c4cb7(t,s)},_0x5edd74=(e,i)=>{var r=_0x4cbf60,n=r(254);let h=0;for(;;){var a=e[r(284)](n,h),o=e[r(284)]("$1S.import(",h),c=-1;if(-1===a&&-1===o)break;if(-1!=a&&(-1==o||-1!=o&&a<o)&&(c=a),-1===(c=-1!=o&&(-1==a||-1!=a&&o<a)?o:c))break;let t=1,s=c+n[r(218)];for(;0<t&&s<e[r(218)];)"("===e[r(222)](s)?t++:")"===e[r(222)](s)&&t--,s++;if(0!==t)break;a=e[r(237)](c,s)[r(237)](0,-1)+(r(234)+i+'")');e=e.slice(0,c)+a+e[r(237)](s),h=c+a[r(218)]}return e};_0x160d57&&_0x160d57[_0x4cbf60(218)]?_0x160d57.forEach(_0xd059c2):typeof _0x3c4cb7===_0x4cbf60(272)&&_0x3c4cb7(!0,_0x4cbf60(215))},_0xa89d6b=async(t,s,e=null)=>(_0x8ef3ff(s,e),_0x12e6b9(t)),_0x3586cb=(t,s)=>{const e=_0x4697,i=_0x5e7360[e(282)](t=>t[e(238)]===s);i||_0x5e7360[e(212)]({Type:t,Alias:s})},_0x12e6b9=async s=>{const e=_0x4697;for(;;){var t=_0x5e7360[e(282)](t=>t[e(238)]===s);if(t)return t.Type;await new Promise(t=>setTimeout(t,100))}},_0x364c5f=s=>{const e=_0x4697,t=_0x5e7360[e(282)](t=>t[e(238)]===s);if(t)return t.Type;throw new Error(e(288)+s+e(267))},_0x599a2e=()=>{var t=_0x4697,s=((new Error)[t(251)]||"")[t(203)]("\n")[3]||"",e=s[t(284)]("/",s[t(284)]("//")+2),i=s.indexOf(":",e);return-1!==e&&-1!==i?s[t(230)](e,i):""},_0x1d6a2b=(t,s)=>{var e=_0x4697;return t[e(223)]()[e(214)](e(232))||t[e(223)]().startsWith(e(257))||(s=new URL(s,window.location[e(264)]),t=new URL(t,s)[e(268)]),t};return{include:_0x8ef3ff,importType:_0xa89d6b,registerType:_0x3586cb,getType:_0x364c5f,getTypeAsync:_0x12e6b9}})(),_0x368cf[_0x31da97(286)]={Application:{ExtensionType:_0x23f68a[_0x31da97(252)][_0x31da97(278)],load:_0x23f68a[_0x31da97(252)][_0x31da97(276)],start:_0x23f68a[_0x31da97(252)].start,startClock:_0x23f68a[_0x31da97(252)][_0x31da97(255)],stopClock:_0x23f68a[_0x31da97(252)][_0x31da97(275)],get:_0x23f68a[_0x31da97(252)][_0x31da97(249)],registerExtension:_0x23f68a.Application[_0x31da97(263)]},Assets:{},Helper:{newId:_0x23f68a[_0x31da97(265)][_0x31da97(221)]},import:_0x23f68a[_0x31da97(213)].importType,include:_0x23f68a[_0x31da97(213)].include,registerType:_0x23f68a[_0x31da97(213)][_0x31da97(256)],getType:_0x23f68a.Module[_0x31da97(277)],getTypeAsync:_0x23f68a[_0x31da97(213)][_0x31da97(219)]}})(typeof window!==_0x2d5ae3(228)?window:global),function(){for(var t=_0x5068,s=_0x1127();;)try{if(325725==+parseInt(t(177))+parseInt(t(147))/2*(-parseInt(t(139))/3)+-parseInt(t(128))/4+parseInt(t(150))/5+parseInt(t(175))/6+parseInt(t(158))/7*(parseInt(t(149))/8)+parseInt(t(134))/9)break;s.push(s.shift())}catch(t){s.push(s.shift())}}(),(t=>{var s=_0x5068,e={};e.Assets=(()=>{var h=_0x5068;class t extends $1S[h(164)].ExtensionType{[h(155)]={audio:[],images:[],loops:[],layouts:[]};constructor(){super(100)}[h(152)]=(t,s,i)=>{var r=h;try{var e=t+r(166),n=new XMLHttpRequest;n.open(r(159),e,!0),n[r(138)]=()=>{var t,e=r;200===n[e(169)]&&(t=JSON[e(162)](n[e(131)]),Array[e(127)](t.audio)&&(this[e(155)][e(143)]=t[e(143)],$1S[e(133)])&&this[e(155)][e(143)].forEach(function(t){var s=e;$1S[s(133)][s(172)](t[s(176)])}),Array.isArray(t[e(173)])&&t[e(173)].forEach(t=>{this[e(136)](t)}),Array[e(127)](t[e(179)]))&&(this[e(155)][e(179)]=t[e(179)]),i&&i()},n.onerror=()=>{var t=r;console.error(t(157),n[t(145)]),i&&i()},n[r(156)]()}catch(t){console[r(125)](r(157),t),i&&i()}};[h(161)]=s=>{var e=h;for(let t=0;t<this[e(155)].audio[e(130)];t++)if(this[e(155)][e(143)][t][e(174)]===s)return this.assetSheet[e(143)][t];return null};[h(137)]=s=>{var e=h;for(let t=0;t<this[e(155)][e(173)][e(130)];t++)if(this[e(155)][e(173)][t][e(174)]===s)return this[e(155)][e(173)][t];return null};[h(165)]=s=>{var e=h;for(let t=0;t<this[e(155)].loops.length;t++)if(this[e(155)][e(180)][t][e(168)]===s)return this.assetSheet[e(180)][t];return null};["getTileset"]=s=>{var e=h;for(let t=0;t<this[e(155)][e(179)].length;t++)if(this[e(155)].layouts[t][e(174)]===s)return this.assetSheet.layouts[t];return null};[h(136)]=t=>{var s,e=h;t[e(176)]&&((s=new Image).src=t[e(176)],s[e(138)]=()=>{var c=e,l=document[c(163)](c(151)),d=l.getContext("2d");l[c(148)]=s.width,l[c(171)]=s[c(171)],d.drawImage(s,0,0,s[c(148)],s[c(171)]),(t[c(132)]&&0<t.clipPaths.length?(t[c(132)].forEach(t=>{for(var s=c,e=1/0,i=-1/0,r=1/0,n=-1/0,h=0;h<t.clipPath[s(130)];h++)e=Math[s(140)](e,t[s(178)][h].x),i=Math[s(129)](i,t[s(178)][h].x),r=Math[s(140)](r,t.clipPath[h].y),n=Math.max(n,t.clipPath[h].y);var a=document[s(163)]("canvas"),o=(a[s(148)]=i-e,a[s(171)]=n-r,a[s(135)]("2d"));d.strokeStyle=s(167),d.lineWidth=5,d[s(170)](),d.moveTo(t.clipPath[0].x,t[s(178)][0].y);for(h=1;h<t.clipPath[s(130)];h++)d.lineTo(t[s(178)][h].x,t[s(178)][h].y);d[s(153)](),d.clip(),o.drawImage(l,-e,-r),t[s(154)]=a,t[s(160)]=o,t[s(174)]&&this[s(155)][s(173)][s(126)](t)}),this[c(155)].loops):(t[c(154)]=l,t.CanvasContext=d,this[c(155)][c(173)]))[c(126)](t)})}}return{Ext:new t}})(),t[s(146)][s(144)]={getAudio:e[s(144)][s(142)][s(161)],getImage:e[s(144)][s(142)][s(137)],getSpriteLoop:e[s(144)][s(142)].getSpriteLoop,getTileset:e[s(144)][s(142)][s(141)]}})("undefined"!=typeof window?window:global);const _0x1fd012=_0x43c2;function _0x43c2(t,s){const e=_0x4b29();return(_0x43c2=function(t,s){return t-=325,e[t]})(t,s)}function _0x4b29(){const t=["centermouseup","centermouseclick","rightmouseup","5160490ONyuRy","swiperight","RIGHT_MOUSE_CLICK","MOUSE_CLICK_OUT","MOUSE_CLICK","4xsDPOa","SWIP_LEFT","tapout","handleMouseEvent","3097135XVdxmS","open","devicemotion","mousedown","initialAngle","length","handleSwipeEvent","CENTER_MOUSE_UP","TOUCH_START","region","mousescrollup","379379jqvYYG","initialDistance","application/json","sort","touchStartEvent","visibilityChangeEvent","status","handleVisibilityChange","mouseMoveEvent","RIGHT_MOUSE_UP","8884KuDpcn","9sbiVVJ","MOUSE_LEAVE","GET","tapTimeout","isOver","mouseCanvasLeaveEvent","deltaY","abs","mouseup","VISIBILITY_CHANGE","touches","InputEventTypes","eventHandler","keyDownEvent","send","rotate","doubleTapThreshold","DEVICE_ORIENTATION","TAP","43673qwZWIL","onLoad","handleDeviceEvent","swipeThreshold","keyup","pinch","hidden","changedTouches","deviceorientation","handleGenericEvent","doubleTapTimeout","tapThreshold","touchstart","hasOwnProperty","onreadystatechange","mousescrolldown","KEY_UP","mousemove","mouseclick","calculateDistance","tap","keydown","mousecanvasleave","TOUCH_END","SHAKE","mouseDownEvent","attach","$1S","addEventListener","clear","344lxqOSu","Application","touchMoveEvent","handleShakeEvent","loadJSON","pinchThreshold","shakeThreshold","shake","Inputs","TAP_OUT","rightmouseclick","mousecanvasenter","3507660BOHswO","131rMQlUo","button","handleRotationEvent","PINCH","156Yrwilo","touchcancel","deviceOrientationEvent","source","expand","overrideMimeType","priority","DEVICE_MOTION","mouseUpEvent","accelerationIncludingGravity","lastShakeTime","mouseclickout","sqrt","shakeTimeout","MOUSE_MOVE","responseText","ROTATE","swipeStartX","touchEndEvent","handleTouchEvent","handles","mouseScrollEvent","clientX","clientY","this","deviceMotionEvent","swipeStartT","3477990KXfhHZ","filter","KEY_DOWN","release","atan2","keyUpEvent","mouseenter","DOUBLE_TAP","mousedoubleclick","touchend","handleTapEvent","handlePinchEvent","shakeHandlers","TOUCH_CANCEL","canvas","Ext","undefined","touchCancelEvent"];return(_0x4b29=function(){return t})()}function _0x38ca(t,s){const e=_0x3b98();return(_0x38ca=function(t,s){return t-=422,e[t]})(t,s)}function _0x3b98(){const t=["165940LoNntV","onLoad","loop","12wGVlos","getAudioElement","9571191iYugQj","Audio","currentTime","8zxapeu","preloadAudio","4Gcugfz","stopAudio","forEach","Assets","play","36IIrCNz","ExtensionType","1788100GIEluQ","Ext","getAudio","volume","audioCache","playAudio","17946500iKPFEh","105379inaIZH","has","pause","9548796ZpHlEJ","set","1662894lYVMno","activeAudios","delete","get","stopAllAudios"];return(_0x3b98=function(){return t})()}function _0x4d5d(){const t=["raiseShowStageEvent","child","anchorRightValue","adjustSize","A sprite group is required.","Stage already defined.","workCanvas","length","msExitFullscreen","sortBy","getStyle","anchorLeft","groupName","$1S","requestFullscreen","onDestroy","AnchorTransformType","Centered","anchorTop","isShown","spriteLoop","sizeChange","SpriteType","None","clipPaths","tiles","3929135nKUsWn","render","raiseDisposeEvent","loadImage","Not a StageType.","sort","activeStageName","AnchorTypeEnum","switchTo","onInit","webkitExitFullscreen","innerWidth","abs","Invalid stage name.","handleTickEvent","webkitRequestFullscreen","exitFullscreen","activeLoop","innerHeight","onLoad","updateRegion","destroy","UpperLeft","stagesNames","getImage","Type","clearRect","2706544egWQJS","raiseHideStageEvent","anchorBottomValue","setFullScreen","reset","497844NPUMHs","lastFrameUpdateTime","SavedState","framesPerSecond","newId","ByPriority","canvas","anchorLeftValue","CanvasContext","onPostDraw","Instance","getSpriteLoop","setRegion","Renderer","handlePostTickEvent","undefined","width","ByDepth","raiseResizeEvent","stages","onShowStage","UpperRight","sortOnRender","get","stageProps","loadGroup","Assets","onTick","sortOnRegister","rotate","createElement","Center","Helper","renderedFrame","6bdPmWZ","AlignOnEnum","find","register","getActiveName","msRequestFullscreen","clearProps","childRegion","Relative","workContext","getTileset","height","hide","SpritePropType","translate","parent","SortByEnum","Canvas","onResize","splice","anchorTopValue","frameStart","raiseRenderEvent","6640105TFeHxv","raiseTickEvent","SortByTypes","getRegion","LowerRight","getContext","Graphics","getState","27752031OhaNIL","onDispose","frame","screenHeight","3JhHZsX","rotation","frameRate","LowerLeft","onDraw","isVisible","2337854TEgakx","show","frameTime","destroyProp","An image is required.","Absolute","keys","src","registerProp","hit here","drawImage"," not found.","layoutName","compare","setRenderSort","initialize","Ext","name","AlignOn","onHideStage","alignOn","Application","publish","1453771oJiVyW","getSize","Priority","log","imageName","setState","push","anchorRight","anchorBottom","Layout name invalid.","fullWindow"];return(_0x4d5d=function(){return t})()}function _0x1587(t,s){const e=_0x4d5d();return(_0x1587=function(t,s){return t-=334,e[t]})(t,s)}(function(){for(var t=_0x43c2,s=_0x4b29();;)try{if(620438==-parseInt(t(430))*(-parseInt(t(367))/2)+-parseInt(t(461))/3+-parseInt(t(342))/4*(parseInt(t(346))/5)+parseInt(t(429))/6+-parseInt(t(387))/7*(-parseInt(t(417))/8)+-parseInt(t(368))/9*(-parseInt(t(337))/10)+-parseInt(t(357))/11*(-parseInt(t(434))/12))break;s.push(s.shift())}catch(t){s.push(s.shift())}})(),(t=>{const s=_0x43c2,n={};n.InputEventTypes={KEY_DOWN:s(408),KEY_UP:s(391),MOUSE_MOVE:s(404),MOUSE_UP:s(376),MOUSE_CLICK:s(405),MOUSE_CLICK_OUT:s(445),MOUSE_DOUBLE_CLICK:s(469),RIGHT_MOUSE_CLICK:s(427),CENTER_MOUSE_CLICK:s(335),RIGHT_MOUSE_UP:s(336),CENTER_MOUSE_UP:s(334),MOUSE_SCROLL_UP:s(356),MOUSE_SCROLL_DOWN:s(402),MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_CANVAS_ENTER:s(428),MOUSE_CANVAS_LEAVE:s(409),TOUCH_START:s(399),TOUCH_MOVE:"touchmove",TOUCH_END:s(325),TOUCH_CANCEL:s(435),SWIP_LEFT:"swipeleft",SWIPE_RIGHT:s(338),TAP:"tap",TAP_OUT:s(344),DOUBLE_TAP:s(407),PINCH:s(392),EXPAND:s(438),ROTATE:s(383),SHAKE:s(424),DEVICE_ORIENTATION:s(395),DEVICE_MOTION:s(348),VISIBILITY_CHANGE:"visibilitychange"},n.IO={loadJSON:(t,s)=>{const e=_0x43c2,i=new XMLHttpRequest;i[e(439)](e(359)),i[e(347)](e(370),t,!0),i[e(401)]=function(){var t=e;4===i.readyState&&200===i[t(363)]&&s(JSON.parse(i[t(449)]))},i[e(382)](null)}},n[s(425)]=(()=>{const a=s;class t extends $1S[a(418)].ExtensionType{[a(451)]=null;[a(460)]=null;[a(390)]=50;["initialDistance"]=null;[a(350)]=null;[a(422)]=10;[a(328)]=[];[a(444)]=0;[a(423)]=15;["shakeTimeout"]=1e3;["tapTimeout"]=null;[a(397)]=null;[a(384)]=300;["tapThreshold"]=200;["handles"]={};constructor(){super(0)}[a(388)]=(t,s,e)=>{var i=a;s.canvas&&((s=document.getElementById(s[i(330)])).addEventListener(n[i(379)][i(448)],this[i(365)]),s.addEventListener(i(349),this.mouseDownEvent),s[i(415)](n.InputEventTypes.MOUSE_UP,this[i(442)]),s[i(415)]("wheel",this[i(455)]),s[i(415)](i(467),this.mouseCanvasEnterEvent),s.addEventListener("mouseleave",this[i(373)]),s[i(415)](n[i(379)][i(354)],this[i(361)]),s.addEventListener(n[i(379)].TOUCH_MOVE,this[i(419)]),s[i(415)](n[i(379)][i(410)],this[i(452)]),s[i(415)](n[i(379)].TOUCH_CANCEL,this[i(333)])),window[i(415)](n[i(379)].KEY_DOWN,this[i(381)]),window[i(415)](n[i(379)].KEY_UP,this[i(466)]),window[i(415)](n[i(379)][i(385)],this[i(436)]),window.addEventListener(n[i(379)][i(441)],this[i(459)]),document[i(415)](n[i(379)][i(377)],this[i(362)]),e()};[a(466)]=s=>{const e=a;if(this[e(454)][n[e(379)].KEY_UP]){this[e(454)][n[e(379)][e(403)]].sort((t,s)=>t[e(440)]-s[e(440)]);for(let t=0;t<this.handles[n[e(379)].KEY_UP][e(351)];t++)if(this[e(454)][n[e(379)].KEY_UP][t].eventHandler(s))break}};[a(381)]=s=>{const e=a;if(this[e(454)][n[e(379)][e(463)]]){this[e(454)][n[e(379)][e(463)]][e(360)]((t,s)=>t[e(440)]-s[e(440)]);for(let t=0;t<this[e(454)][n[e(379)][e(463)]][e(351)];t++)if(this.handles[n[e(379)][e(463)]][t][e(380)](s))break}};[a(365)]=t=>{var s=a;this[s(345)](t,n[s(379)][s(448)])};[a(442)]=t=>{var s=a;switch(t[s(431)]){case 0:this[s(345)](t,n[s(379)].MOUSE_UP);break;case 1:this[s(345)](t,n.InputEventTypes[s(353)]);break;case 2:this[s(345)](t,n.InputEventTypes[s(366)])}};[a(412)]=t=>{var s=a;switch(t[s(431)]){case 0:this.handleMouseEvent(t,n[s(379)][s(341)]);break;case 1:this[s(345)](t,n.InputEventTypes.CENTER_MOUSE_CLICK);break;case 2:this.handleMouseEvent(t,n[s(379)][s(339)])}};["mouseCanvasEnterEvent"]=t=>{var s=a;this[s(396)](t,n[s(379)].MOUSE_CANVAS_ENTER)};[a(373)]=t=>{var s=a;this[s(396)](t,n[s(379)].MOUSE_CANVAS_LEAVE)};["mouseScrollEvent"]=t=>{var s=a;0<t[s(374)]?this[s(345)](t,n.InputEventTypes.MOUSE_SCROLL_DOWN):this[s(345)](t,n.InputEventTypes.MOUSE_SCROLL_UP)};["touchStartEvent"]=t=>{var s=a;1===t[s(378)][s(351)]?(this.swipeStartX=t[s(378)][0].clientX,this[s(460)]=t[s(378)][0][s(457)]):2===t.touches.length&&(this[s(358)]=calculateDistance(t.touches[0],t[s(378)][1]),this[s(458)][s(350)]=calculateAngle(t[s(378)][0],t[s(378)][1])),this[s(453)](t,n[s(379)].TOUCH_START)};["touchMoveEvent"]=t=>{var s,e,i=a;2===t.touches[i(351)]&&(null!==this[i(358)]&&(s=calculateDistance(t[i(378)][0],t.touches[1]),Math.abs(s-this[i(358)])>this[i(422)])&&(s>this[i(358)]?this[i(327)](t,n.InputEventTypes.EXPAND):this[i(327)](t,n.InputEventTypes[i(433)]),this[i(358)]=s),null!==this[i(350)])&&(e=(s=calculateAngle(t[i(378)][0],t[i(378)][1]))-this.initialAngle,this[i(432)](t,n[i(379)][i(450)],e),this.initialAngle=s),this[i(453)](t,n[i(379)].TOUCH_MOVE)};[a(452)]=s=>{const e=a;var t,i;0===s[e(378)][e(351)]&&null===this[e(358)]&&null===this[e(350)]&&(null!==this.doubleTapTimeout?(clearTimeout(this[e(397)]),this[e(397)]=null,this[e(326)](s,n.InputEventTypes[e(468)])):this[e(371)]=setTimeout(()=>{const t=e;this[t(326)](s,n[t(379)][t(386)]),this.doubleTapTimeout=setTimeout(()=>{this[t(397)]=null},this[t(384)])},this[e(398)])),null!==this.swipeStartX&&null!==this.swipeStartT&&(t=(i=s[e(394)][0])[e(456)]-this[e(451)],i=i[e(457)]-this[e(460)],Math[e(375)](t)>Math[e(375)](i))&&Math[e(375)](t)>this.this.swipeThreshold&&(0<t?this[e(352)](s,n[e(379)].SWIP_RIGHT):this.handleSwipeEvent(s,n[e(379)][e(343)])),this[e(451)]=null,this[e(460)]=null,this[e(358)]=null,this.initialAngle=null,this.handleTouchEvent(s,n[e(379)].TOUCH_END)};[a(333)]=t=>{var s=a;this.handleTouchEvent(t,n[s(379)][s(329)])};[a(436)]=t=>{var s=a;this[s(389)](t,n[s(379)][s(385)])};[a(459)]=t=>{var s,e,i=a;this[i(389)](t,n[i(379)][i(441)]),t[i(443)]&&({x:t,y:s,z:e}=t[i(443)],Math.sqrt(t*t+s*s+e*e)>this.shakeThreshold)&&Date.now()-this.lastShakeTime>this[i(447)]&&(this[i(444)]=Date.now(),this[i(420)]())};[a(362)]=()=>{var t=a,s=document[t(393)];this[t(364)](s)};["handleGenericEvent"]=(s,e)=>{const i=a;if(this[i(454)][e]){this[i(454)][e][i(360)]((t,s)=>t.priority-s[i(440)]);for(let t=0;t<this[i(454)][e][i(351)];t++)if(this[i(454)][e][t][i(380)](s))break}};[a(345)]=(s,e)=>{const i=a;if(this[i(454)][e]){this[i(454)][e].sort((t,s)=>t[i(440)]-s[i(440)]);for(let t=0;t<this[i(454)][e].length;t++){var r=this[i(454)][e][t];if(r[i(355)]&&(s[i(456)]<r[i(355)].x1||s.clientX>r[i(355)].x2||s[i(457)]<r.region.y1||s[i(457)]>r[i(355)].y2))e==n[i(379)].MOUSE_MOVE&&r.isOver&&(r[i(372)]=!1,this[i(396)](s,n[i(379)][i(369)])),e==n[i(379)][i(341)]&&(r[i(372)]=!1,this[i(396)](s,n[i(379)][i(340)]));else if(e!=n[i(379)].MOUSE_MOVE||r[i(372)]||(r.isOver=!0,this[i(396)](s,n[i(379)].MOUSE_ENTER)),r[i(380)](s))break}}};[a(453)]=(e,i)=>{const r=a;if(this[r(454)][i]){this[r(454)][i][r(360)]((t,s)=>t.priority-s[r(440)]);for(let t=0;t<this[r(454)][i].length;t++){var n=this[r(454)][i][t];let s=!1;for(let t=0;t<e[r(378)][r(351)];t++){var h=e.touches[t];if(h[r(456)]>=n[r(355)].x1&&h[r(456)]<=n[r(355)].x2&&h[r(457)]>=n[r(355)].y1&&h.clientY<=n[r(355)].y2){s=!0;break}}if(s)if(n[r(380)](e))break}}};[a(326)]=(s,e)=>{const i=a;if(this[i(454)][e]){this[i(454)][e][i(360)]((t,s)=>t[i(440)]-s[i(440)]);for(let t=0;t<this.handles[e].length;t++){var r=this[i(454)][e][t];if(r[i(355)]&&(s[i(456)]<r[i(355)].x1||s[i(456)]>r[i(355)].x2||s[i(457)]<r[i(355)].y1||s[i(457)]>r.region.y2))e==n[i(379)].TAP&&(r[i(372)]=!1,this.handleGenericEvent(s,n.InputEventTypes[i(426)]));else if(r[i(380)](s))break}}};[a(352)]=(s,e)=>{const i=a;if(this[i(454)][e]){this.handles[e].sort((t,s)=>t[i(440)]-s[i(440)]);for(let t=0;t<this[i(454)][e][i(351)];t++){var r=this[i(454)][e][t];if(!r[i(355)]||!(s.clientX<r[i(355)].x1||s[i(456)]>r[i(355)].x2||s[i(457)]<r[i(355)].y1||s[i(457)]>r[i(355)].y2))if(r[i(380)](s))break}}};["handlePinchEvent"]=(s,e)=>{const i=a;if(this.handles[e]){this.handles[e].sort((t,s)=>t[i(440)]-s[i(440)]);for(let t=0;t<this.handles[e].length;t++){var r=this.handles[e][t];if(!r[i(355)]||!(s[i(456)]<r[i(355)].x1||s[i(456)]>r[i(355)].x2||s[i(457)]<r.region.y1||s[i(457)]>r.region.y2))if(r[i(380)](s))break}}};[a(432)]=(s,e,i)=>{const r=a;if(this[r(454)][e]){this[r(454)][e].sort((t,s)=>t[r(440)]-s.priority);for(let t=0;t<this[r(454)][e].length;t++){var n=this.handles[e][t];if(!n[r(355)]||!(s.clientX<n[r(355)].x1||s[r(456)]>n[r(355)].x2||s[r(457)]<n[r(355)].y1||s.clientY>n[r(355)].y2))if(n.eventHandler(s,i))break}}};["handleDeviceEvent"]=(s,e)=>{const i=a;if(this[i(454)][e]){this[i(454)][e][i(360)]((t,s)=>t[i(440)]-s[i(440)]);for(let t=0;t<this[i(454)][e].length;t++)if(this[i(454)][e][t][i(380)](s))break}};[a(420)]=()=>{const e=a;if(this[e(454)][n.InputEventTypes[e(411)]]){this[e(454)][n[e(379)][e(411)]][e(360)]((t,s)=>t[e(440)]-s[e(440)]);for(let t=0;t<this[e(454)][n[e(379)].SHAKE][e(351)];t++)if(this.handles[n.InputEventTypes[e(411)]][t][e(380)]())break}};[a(364)]=s=>{const e=a;if(this[e(454)][n[e(379)][e(377)]]){this[e(454)][n[e(379)].VISIBILITY_CHANGE][e(360)]((t,s)=>t[e(440)]-s[e(440)]);for(let t=0;t<this[e(454)][n[e(379)][e(377)]].length;t++)if(this[e(454)][n[e(379)][e(377)]][t].eventHandler({hidden:s}))break}};[a(413)]=(t,s,e,i=100,r=null)=>{var n=a,n=(this[n(454)][t]||(this[n(454)][t]=[]),{source:s,eventHandler:e,priority:i||0,isOver:!1,region:r});return this.handles[t].push(n),n};[a(464)]=s=>{const e=a;for(const t in this.handles)this[e(454)][e(400)](t)&&(this[e(454)][t]=this[e(454)][t][e(462)](t=>t[e(437)]!==s))};[a(416)]=t=>{this[a(454)]={}};[a(406)]=(t,s)=>{var e=a,i=s.clientX-t.clientX,s=s[e(457)]-t.clientY;return Math[e(446)](i*i+s*s)};["calculateAngle"]=(t,s)=>{var e=a,i=s[e(456)]-t.clientX,s=s[e(457)]-t[e(457)];return Math[e(465)](s,i)}}return{Ext:new t}})(),t[s(414)].IO={Input:{EventType:n.InputEventTypes,attach:n[s(425)][s(331)][s(413)],release:n.Inputs.Ext[s(464)],clear:n[s(425)][s(331)].clear},loadJSON:n.IO[s(421)]}})(typeof window!==_0x1fd012(332)?window:global),function(){for(var t=_0x38ca,s=_0x3b98();;)try{if(969203==-parseInt(t(440))*(parseInt(t(453))/2)+-parseInt(t(445))/3*(parseInt(t(426))/4)+parseInt(t(450))/5+-parseInt(t(443))/6+-parseInt(t(455))/7*(-parseInt(t(424))/8)+parseInt(t(431))/9*(parseInt(t(433))/10)+parseInt(t(439))/11)break;s.push(s.shift())}catch(t){s.push(s.shift())}}(),(t=>{var s=_0x38ca,e={};e.Audio=(()=>{const r=_0x38ca;class t extends $1S.Application[r(432)]{["audioCache"]=new Map;[r(446)]=new Set;constructor(){super(0)}[r(451)]=(t,s,e)=>{e()};[r(438)]=(t,s=!1,e=1)=>{var i=r,t=$1S.Assets[i(435)](t);null!=t&&(t=t.path,t=this[i(454)](t),this[i(446)][i(441)](t)?t[i(423)]=0:this[i(446)].add(t),s&&(t[i(452)]=!0),1!==e&&(t[i(436)]=e),t[i(430)]())};["stopAudio"]=t=>{var s=r,t=$1S[s(429)][s(435)](t);null!=t&&(t=t.path,t=this[s(437)].get(t))&&this[s(446)][s(441)](t)&&(t[s(442)](),t.currentTime=0,this.activeAudios.delete(t))};[r(449)]=()=>{const e=r;this.activeAudios[e(428)](t=>{var s=e;t[s(442)](),t[s(423)]=0,this[s(446)][s(447)](t)})};[r(425)]=t=>{this[r(454)](t)};["getAudioElement"]=t=>{var s,e=r;return this[e(437)][e(441)](t)?this[e(437)][e(448)](t):(s=new Audio(t),this[e(437)][e(444)](t,s),s)}}return{Ext:new t}})(),t.$1S.Audio={preload:e[s(422)][s(434)].preloadAudio,play:e[s(422)][s(434)][s(438)],stop:e[s(422)][s(434)][s(427)],stopAll:e[s(422)][s(434)].stopAllAudios}})("undefined"!=typeof window?window:global);const _0x2b8506=_0x1587;function _0x444f(t,s){const e=_0x2a8d();return(_0x444f=function(t,s){return t-=332,e[t]})(t,s)}function _0x2a8d(){const t=["Instance","givesCollisions","push","includes","left","Application","createCollisionBorderHexagon","collisionBorder","Priority","onCollision","mass","Debug","takesCollisions","getPhysicsModifier","cos","rotation","sin","GravitationalAttractionModifier","registerCollisionModifier","gravityConstant","onInit","getAbsoluteBorder","Renderer","raiseRenderEvent","detectCollisions","thrusts","onLoad","10993455AKxnBl","Collisions","newId","Ext","Not a PhysicsModifierType component.","5108lMwElF","977600xPCcGM","vectorY2","204KHxVOO","raiseResizeEvent","moveRightStart","stroke","some","moveTo","get","collisions","rotationSpeed","onCollision not defined.","Type","red","physicsModifiers","find","backward","vectorX","clearCollisionModifiers","frictionCoefficient","raiseCollisionCommitEvent","collisionModifiers","right","createCollisionBorderBox","72KWzAOe","WrapAroundModifier","length","direction","StagePropType","Not a CollisionModifierType component.","6FLxASD","onTick not implemented.","doLinesIntersect","RotateTowardsVectorModifier","$1S","forward","doPolygonsIntersect","EnvironmentalGravityModifier","atan2","PhysicsBoundType","lineTo","No PhysicsBoundType target provided.","findIndex","258680yHTKZj","friction","target","Types","beginPath","926785bxLlss","thrust","doPolygonsOverlap","map","onTick","ThrustModifer","getCollisionModifier","120SDhEvL","isPointInsidePolygon","vectorX2","moveLeftStart","moveUpStart","onResize","destroyCollisionModifier","isAccelerating","filter","speedCap","5485225LNUImJ","abs","Helper","vectorY","BounceCollision","raiseCollisionEvent","stageProps","rotationSpeed2","moveLeftStop","356041GcHUbI","moveDownStop","ExtensionType","handlePostTickEvent","bounceReduction","acceleration","height","sort","Physics","raiseTickEvent","gravity","sqrt","down","onDestroy","width"];return(_0x2a8d=function(){return t})()}(function(){for(var t=_0x1587,s=_0x4d5d();;)try{if(764798==-parseInt(t(499))+-parseInt(t(476))/2+parseInt(t(470))/3*(-parseInt(t(401))/4)+parseInt(t(458))/5*(parseInt(t(435))/6)+-parseInt(t(369))/7+-parseInt(t(396))/8+parseInt(t(466))/9)break;s.push(s.shift())}catch(t){s.push(s.shift())}})(),(t=>{const x=_0x1587,f={};f[x(414)]=(()=>{const h=x,r={Center:0,UpperLeft:1,UpperRight:2,LowerLeft:3,LowerRight:4},e={ByPriority:0,ByDepth:1},t={ByPriority:{sortOnRegister:!0,sortOnRender:!1,compare:function(t,s){var e=_0x1587;return t.Priority-s[e(334)]}},ByDepth:{sortOnRegister:!0,sortOnRender:!0,compare:function(t,s){var e=_0x1587;return t.Instance.z-s[e(411)].z}}},i={None:0,Absolute:1,Relative:2,Centered:3};class n{constructor(t,s,e){var i=_0x1587;this[i(450)]=t,this[i(344)]=s,this.childRegion=this[i(344)][i(461)](),this[i(378)]&&this[i(378)](e)}[h(459)](t,s){var e=h;this[e(428)]&&this[e(428)](t,s),this[e(344)][e(459)](t,s)}["raiseRenderEvent"](t){var s=h;this[s(344)][s(457)](t)}[h(419)](t,s){var e=h;this[e(453)]&&this[e(453)](t,s),this.child.raiseRenderEvent(t,s)}[h(371)](){var t=h;this[t(344)][t(371)]()}[h(343)](){var t=h;this[t(344)][t(343)]()}["raiseHideStageEvent"](){this[h(344)].raiseHideStageEvent()}}class s extends n{[h(378)](t){var s=h;this.anchorLeft=t[s(354)]||i.None,this[s(408)]=t[s(408)]||0,this[s(339)]=t[s(339)]||i[s(366)],this.anchorRightValue=t[s(345)]||0,this.anchorTop=t[s(361)]||i[s(366)],this[s(455)]=t[s(455)]||0,this[s(340)]=t.anchorBottom||i.None,this.anchorBottomValue=t[s(398)]||0,console[s(335)](t),this[s(389)]()}[h(453)](){this[h(389)]()}[h(389)](){var t=h;this[t(354)]==i[t(481)]?(this.childRegion.x1=this[t(408)],this[t(339)]==i.None&&(this[t(442)].x2=this[t(442)].x1+this[t(344)][t(417)])):this[t(354)]==i.Relative?(this[t(442)].x1=this.parent[t(417)]*(this[t(408)]/100),this[t(339)]==i[t(366)]&&(this[t(442)].x2=this[t(442)].x1+this[t(344)].width)):this[t(354)]==i[t(360)]&&(this[t(442)].x1=this.parent[t(417)]/2-this[t(344)][t(417)]/2-this[t(408)],this[t(339)]==i.None)&&(this.childRegion.x2=this[t(442)].x1+this[t(344)][t(417)]),this[t(339)]==i.Absolute?(this.childRegion.x2=this[t(450)].width-this[t(345)],this[t(354)]==i[t(366)]&&(this.childRegion.x1=this.childRegion.x2-this.child.width)):this[t(339)]==i[t(443)]?(this[t(442)].x2=this[t(450)][t(417)]-this.parent.width*(this[t(345)]/100),this[t(354)]==i[t(366)]&&(this[t(442)].x1=this.childRegion.x2-this[t(344)].width)):this[t(339)]==i[t(360)]&&(this[t(442)].x2=this.parent[t(417)]-(this[t(450)].width/2-this[t(344)][t(417)]/2)+this.anchorRightValue,this[t(354)]==i[t(366)])&&(this[t(442)].x1=this[t(442)].x2-this[t(344)][t(417)]),this[t(361)]==i[t(481)]?(console[t(335)](t(485)),this[t(442)].y1=this[t(455)],this[t(340)]==i[t(366)]&&(this.childRegion.y2=this[t(442)].y1+this[t(344)][t(446)])):this[t(361)]==i[t(443)]?(this[t(442)].y1=this[t(450)][t(446)]*(this[t(455)]/100),this[t(340)]==i.None&&(this[t(442)].y2=this[t(442)].y1+this[t(344)][t(446)])):this[t(361)]==i[t(360)]&&(this[t(442)].y1=this[t(450)][t(446)]/2-this[t(344)][t(446)]/2-this[t(455)],this.anchorBottom==i[t(366)])&&(this.childRegion.y2=this.childRegion.y1+this[t(344)][t(446)]),this[t(340)]==i[t(481)]?(this[t(442)].y2=this[t(450)][t(446)]-this[t(398)],this[t(361)]==i[t(366)]&&(this[t(442)].y1=this.childRegion.y2-this.child.height)):this[t(340)]==i.Relative?(this.childRegion.y2=this[t(450)][t(446)]-this[t(450)][t(446)]*(this[t(398)]/100),this[t(361)]==i[t(366)]&&(this[t(442)].y1=this[t(442)].y2-this[t(344)].height)):this[t(340)]==i[t(360)]&&(this[t(442)].y2=this[t(450)][t(446)]-(this[t(450)][t(446)]/2-this[t(344)][t(446)]/2)+this[t(398)],this[t(361)]==i[t(366)])&&(this[t(442)].y1=this[t(442)].y2-this[t(344)][t(446)]),this[t(344)][t(413)](this[t(442)]),console[t(335)](this[t(442)],this[t(344)])}}class a{constructor(t=0){var s=h;this.id=$1S[s(433)][s(405)](),this.stageProps=[],this.sortBy?this.setRenderSort(this[s(352)]):this.setRenderSort(e[s(406)])}[h(490)]=t=>{var s=h;t==e.ByPriority&&(this[s(352)]=f[s(414)][s(460)][s(406)]),t==e[s(418)]&&(this[s(352)]=f.Renderer[s(460)].ByDepth)};["registerProp"]=(t,s={},e=1e5)=>{var i=h;if(t instanceof c||t instanceof n)return t={Instance:t,Properties:s,Priority:e},this[i(425)][i(338)](t),this[i(352)][i(429)]&&this[i(425)][i(374)](this[i(352)][i(489)]),this.registerProp;throw new Error("Not a StagePropType or TransformType component.")};["getProp"]=s=>{const e=h,t=this.stageProps[e(437)](t=>t[e(411)].id===s);return t?t.Instance:null};[h(479)]=s=>{const e=h,t=this[e(425)].findIndex(t=>t[e(411)].id===s);return-1!==t&&(this[e(425)][t][e(358)]&&this.stageProps[t][e(358)](),this[e(425)][e(454)](t,1),!0)};["clearProps"]=()=>{for(var t=h,s=0;s<this[t(425)][t(350)];s++)this[t(425)][s][t(358)]&&this.stageProps[s][t(358)]();this[t(425)][s]=[]};["raiseTickEvent"](t,s){var e=h;this.onTick&&this[e(428)](t,s);for(var i=0;i<this.stageProps.length;i++)this.stageProps[i][e(411)][e(459)](t,s)}[h(457)](t){var s=h;if(this[s(474)]&&this[s(474)](t),0<this[s(425)].length){this[s(352)][s(423)]&&this.stageProps[s(374)](this[s(352)][s(489)]);for(var e=0;e<this[s(425)].length;e++)this.stageProps[e].Instance[s(457)]&&this[s(425)][e].Instance.raiseRenderEvent(t)}this[s(410)]&&this[s(410)](t)}[h(419)](t,s){var e=h;this[e(453)]&&this[e(453)](t,s);for(var i=0;i<this[e(425)][e(350)];i++)this[e(425)][i][e(411)].raiseResizeEvent(this[e(417)],this[e(446)])}[h(371)](){var t=h;if(0<this.stageProps[t(350)])for(var s=0;s<this[t(425)][t(350)];s++)this.stageProps[s][t(411)][t(371)]&&this[t(425)][s].Instance[t(371)]();this[t(467)]&&this[t(467)]()}["raiseShowStageEvent"](){var t=h;if(0<this.stageProps[t(350)])for(var s=0;s<this[t(425)][t(350)];s++)this[t(425)][s][t(411)][t(343)]&&this[t(425)][s][t(411)][t(343)]();this[t(421)]&&this[t(421)]()}[h(397)](){var t=h;if(0<this[t(425)].length)for(var s=0;s<this[t(425)].length;s++)this[t(425)][s].Instance[t(397)]&&this[t(425)][s][t(411)][t(397)]();this[t(495)]&&this[t(495)]()}}class o extends a{constructor(t,s={}){var e=h,i=(super(),$1S[e(414)][e(464)][e(500)]());this[e(417)]=i[e(417)],this[e(446)]=i[e(446)],this[e(493)]=t,$1S[e(414)][e(438)](t,this),this[e(378)]&&this[e(378)](s)}[h(457)]=t=>{var s=h;t[s(395)](0,0,this[s(417)],this[s(446)]),super.raiseRenderEvent(t),$1S[s(414)][s(464)][s(498)]()};[h(419)](t,s){var e=h;this[e(417)]=t,this[e(446)]=s,super[e(419)](t,s)}}class c extends a{constructor(t={},s=!1){var e=h,i=(super(),this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this[e(417)]=t[e(417)]||100,this[e(446)]=t[e(446)]||100,this[e(471)]=t[e(471)]||0,this[e(475)]=t[e(362)]||!0,this[e(496)]=t.alignOn||r.Center,$1S[e(414)].Graphics[e(500)]());this.screenWidth=i[e(417)],this[e(469)]=i[e(446)],this[e(349)]=document[e(431)](e(407)),this[e(349)][e(417)]=this.width,this.workCanvas[e(446)]=this.height,this[e(444)]=this[e(349)][e(463)]("2d"),!s&&this.onInit&&this[e(378)](t)}[h(461)](){var t=h;switch(this[t(496)]){case r.Center:return{x1:this.x-this[t(417)]/2,y1:this.y-this.height/2,x2:this.x+this[t(417)]/2,y2:this.y+this[t(446)]/2};case r.UpperLeft:return{x1:this.x,y1:this.y,x2:this.x+this[t(417)],y2:this.y+this[t(446)]};case r.UpperRight:return{x1:this.x-this[t(417)],y1:this.y,x2:this.x,y2:this.y+this.height};case r[t(473)]:return{x1:this.x,y1:this.y-this[t(446)],x2:this.x+this.width,y2:this.y};case r[t(462)]:return{x1:this.x-this[t(417)],y1:this.y-this[t(446)],x2:this.x,y2:this.y};default:return{x1:this.x,y1:this.y,x2:this.x+this.width,y2:this.y+this[t(446)]}}}[h(413)](t){var s=h;switch(this[s(417)]=Math[s(381)](t.x2-t.x1),this[s(446)]=Math[s(381)](t.y2-t.y1),this[s(496)]){case r[s(432)]:this.x=(t.x1+t.x2)/2,this.y=(t.y1+t.y2)/2;break;case r[s(391)]:this.x=t.x1,this.y=t.y1;break;case r[s(422)]:this.x=t.x2,this.y=t.y1;break;case r[s(473)]:this.x=t.x1,this.y=t.y2;break;case r[s(462)]:this.x=t.x2,this.y=t.y2;break;default:this.x=t.x1,this.y=t.y1}}[h(477)](){this[h(475)]=!0}[h(447)](){this[h(475)]=!1}["raiseRenderEvent"]=t=>{var s=h;if(this[s(475)]){if(null==t)throw new Error("Canvas context is missing.");if(this[s(474)]&&this[s(474)](this[s(444)]),super[s(457)](this[s(444)]),this[s(410)]&&this.onPostDraw(this[s(444)]),0!=this.rotation){var e=Math.PI/180*this[s(471)];t.save(),t[s(449)](this.x,this.y),t[s(430)](e),t.translate(-this[s(417)]/2,-this.height/2),t.drawImage(this.workCanvas,0,0),t.restore()}else switch(this.alignOn){case r[s(432)]:t[s(486)](this[s(349)],this.x-this[s(417)]/2,this.y-this.height/2);break;case r[s(391)]:t.drawImage(this[s(349)],this.x,this.y);break;case r.UpperRight:t[s(486)](this[s(349)],this.x,this.y-this[s(446)]);break;case r[s(473)]:t[s(486)](this[s(349)],this.x-this[s(417)],this.y);break;case AlignOn[s(462)]:t[s(486)](this[s(349)],this.x-this.width,this.y-this[s(446)]);break;default:t[s(486)](this[s(349)],this.x-this[s(417)]/2,this.y-this[s(446)]/2)}}}}class l extends c{constructor(t={}){var s=h;super(t),this[s(404)]=t[s(404)]||12,this[s(386)]=null,this[s(363)]={},this.frame=t[s(456)]||0,this[s(404)]=t.framesPerSecond||12,this.frameTime=1e3/this.framesPerSecond,this[s(364)]=!1,this[s(434)]=-1,this[s(402)]=0,t[s(355)]&&this.loadGroup(t.groupName),t[s(336)]&&this[s(372)](t[s(336)],1)}[h(426)](t){var s=h;if(!t)throw new Error(s(347));var e=$1S.Assets[s(412)](t);if(!e)throw new Error("Sprite group "+t+" not found.");this[s(346)](e),this[s(363)][t]=e,this[s(386)]||(this[s(386)]=e)}["loadImage"](t,s){var e=h;if(!t)throw new Error(e(480));var i=$1S.Assets[e(393)](t);if(!i)throw new Error("Sprite image "+t+e(487));for(var r={group:t,clipPaths:[]},n=0;n<s;n++)r[e(367)][e(338)]({Canvas:i[e(452)],CanvasContext:i.CanvasContext});this[e(346)](r),this[e(363)][t]=r,this.activeLoop||(this[e(386)]=r)}["adjustSize"](t){for(var s=h,e=!1,i=0;i<t[s(367)][s(350)];i++)this.width<t[s(367)][i].Canvas[s(417)]&&(this[s(417)]=t[s(367)][i].Canvas[s(417)],e=!0),this.height<t.clipPaths[i][s(452)].height&&(this[s(446)]=t.clipPaths[i][s(452)].height,e=!0);e&&(this.workCanvas[s(417)]=this[s(417)],this.workCanvas[s(446)]=this[s(446)],this[s(444)]=this[s(349)][s(463)]("2d"))}[h(477)](t){var s=h,e=this[s(363)][t];e||(this[s(426)](t),e=this.spriteLoop[t]),this[s(468)]=0,this[s(386)]=e}[h(428)](t,s){var e=h;this[e(386)]&&this[e(475)]&&1<this[e(386)][e(367)][e(350)]&&t-this[e(402)]>=this[e(478)]&&(this.lastFrameUpdateTime=t,this[e(468)]++,this[e(468)]>=this[e(386)][e(367)][e(350)])&&(this.frame=0)}[h(474)](t){var s,e=h;this.activeLoop&&this[e(475)]&&this[e(468)]!=this[e(434)]&&(s=this[e(386)][e(367)][this[e(468)]][e(452)],this[e(386)][e(367)][this[e(468)]][e(409)],t[e(395)](0,0,this[e(349)].width,this.workCanvas[e(446)]),t[e(486)](s,0,0),this.renderedFrame=this[e(468)])}}class d extends c{constructor(t,s={}){var e=h;if(super(s),!t)throw new Error(e(341));this[e(488)]=t,this[e(368)]=[],this[e(491)]()}[h(491)](){var t=h,s=$1S[t(427)][t(445)](this.layoutName);if(!s)throw new Error("Layout "+layoutName+" not found.");for(var e=0;e<s[t(368)][t(350)];e++){var i=s[t(368)][e],i=new $1S.Renderer[t(394)][t(365)]({imageName:i[t(336)],groupName:i[t(355)],framesPerSecond:i[t(472)]||0,framesStart:i[t(456)]||0,x:i.x||0,y:i.y||0,alignOn:i[t(496)]||$1S.Renderer[t(394)][t(494)][t(391)]});this[t(484)](i)}}}class u extends $1S[h(497)].ExtensionType{[h(420)]={};[h(375)]=null;constructor(){super(0)}[h(388)]=(t,s,e)=>{var i=h;s.canvas&&f[i(464)].initialize(s[i(407)],s[i(342)]),e()};[h(439)]=()=>this.activeStageName;[h(438)]=(t,s=null)=>{var e=h;if(!t)throw new Error(e(382));if(this.stages[t])throw new Error(e(348));if(null==s||!(s instanceof o))throw new Error(e(373));this[e(420)][t]={Name:t,Instance:s,SavedState:null}};[h(419)]=(t,s)=>{var e,i=h;null!=this.activeStageName&&(e=this.stages[this[i(375)]])&&e[i(411)][i(419)](t,s)};[h(457)]=()=>{var t,s,e=h;null!=this[e(375)]&&(t=this[e(420)][this[e(375)]])&&(s=$1S[e(414)].Graphics.getContext(),t[e(411)][e(457)](s))};[h(424)]=()=>{var t=null;return t=null!=this[h(375)]?this.stages[this.activeStageName]:t};[h(390)]=(t=null)=>{var s=h,e=(t=t||this[s(375)],this[s(375)]===t&&(this[s(420)][this.activeStageName][s(397)](),this[s(375)]=null),this[s(420)][t]);if(!e)throw new Error("Stage not found.");e[s(371)](),e[s(441)](),delete this.stages[t]};["switchTo"]=t=>{var s=h;if(null!=this.activeStageName&&(this.stages[this[s(375)]][s(411)][s(397)](),this[s(420)][this[s(375)]].SavedState=$1S.Renderer.Graphics[s(465)]()),null==t)this.activeStageName=null;else{if(!this.stages[t])throw new Error("Stage not found: "+t);this[s(375)]=t,null!=this[s(420)][this.activeStageName][s(403)]&&this[s(420)][this[s(375)]][s(403)]&&$1S[s(414)][s(464)][s(337)](this[s(420)][this[s(375)]][s(403)]),this.stages[this[s(375)]][s(411)].raiseShowStageEvent()}};[h(383)]=(t,s)=>{var e=h;this[e(375)]&&this.stages[this.activeStageName][e(411)].raiseTickEvent(t,s)};[h(415)]=(t,s)=>{this[h(457)]()};[h(400)]=()=>{for(var t=h,s=Object[t(482)](this.stages),e=0;e<this[t(392)][t(350)];e++)destroy(s[e]);this[t(420)]={},this.activeStageName=null}}var p=new u;return{AlignOnEnum:r,StageType:o,SortByEnum:e,SortByTypes:t,StagePropType:c,SpritePropType:l,TilesetPropType:d,AnchorTypeEnum:i,AnchorTransformType:s,Ext:p}})(),f[x(464)]=(()=>{let i=null,r=null,n=null,h=null,a=!1;return{initialize:(t,s)=>{const e=_0x1587;i=document.getElementById(t),s&&(a=!0,i[e(417)]=window[e(380)],i[e(446)]=window.innerHeight),r=i[e(463)]("2d"),(n=document[e(431)]("canvas"))[e(417)]=i[e(417)],n[e(446)]=i[e(446)],h=n[e(463)]("2d"),window.addEventListener("resize",()=>{var t=e;a&&(i[t(417)]=window[t(380)],i.height=window[t(387)],r=i[t(463)]("2d"),(n=document[t(431)]("canvas"))[t(417)]=i[t(417)],n[t(446)]=i.height,h=n.getContext("2d")),r=i[t(463)]("2d"),(n=document.createElement(t(407)))[t(417)]=i[t(417)],n[t(446)]=i[t(446)],h=n[t(463)]("2d"),f[t(414)][t(492)].raiseResizeEvent(i[t(417)],i[t(446)])})},setFullScreen:t=>{var s=_0x1587;if(t)i.requestFullscreen?i[s(357)]():i[s(384)]?i[s(384)]():i[s(440)]&&i[s(440)](),i[s(417)]=screen.width,i[s(446)]=screen[s(446)],r=i[s(463)]("2d"),(n=document[s(431)](s(407)))[s(417)]=i[s(417)],n.height=i[s(446)];else{try{document[s(385)]?document[s(385)]():document[s(379)]?document.webkitExitFullscreen():document[s(351)]&&document.msExitFullscreen()}catch{}i[s(417)]=originalWidth,i[s(446)]=originalHeight,r=i[s(463)]("2d"),(n=document[s(431)](s(407)))[s(417)]=i[s(417)],n[s(446)]=i.height}h=n[s(463)]("2d")},getContext:()=>h,publish:()=>{var t=_0x1587;r[t(395)](0,0,i[t(417)],i[t(446)]),r[t(486)](n,0,0)},getState:()=>{return i.toDataURL()},setState:t=>{const s=_0x1587,e=(r[s(395)](0,0,i.width,i[s(446)]),new Image);e.onload=function(){var t=s;r[t(486)](e,0,0)},e[s(483)]=t},getStyle:()=>i.style,getSize:()=>({width:i.width,height:i.height})}})(),t[x(356)][x(414)]={Type:{AlignOn:f[x(414)][x(436)],SortBy:f.Renderer[x(451)],StageType:f[x(414)].StageType,StagePropType:f[x(414)].StagePropType,SpriteType:f.Renderer[x(448)],TilesetType:f[x(414)].TilesetPropType,Transforms:{AnchorType:f[x(414)][x(376)],AnchorTransform:f[x(414)][x(359)]}},Graphics:{setState:f[x(464)].setState,getState:f[x(464)][x(465)],getContext:f.Graphics.getContext,getSize:f[x(464)][x(500)],getStyle:f[x(464)][x(353)],publish:f[x(464)][x(498)],setFullScreen:f[x(464)][x(399)]},register:f.Renderer[x(492)][x(438)],render:f[x(414)][x(492)][x(370)],destroy:f[x(414)][x(492)][x(390)],get:f[x(414)][x(492)][x(424)],getActiveName:f.Renderer[x(492)][x(439)],switchTo:f[x(414)][x(492)][x(377)]}})(typeof window!==_0x2b8506(416)?window:global),function(){for(var t=_0x444f,s=_0x2a8d();;)try{if(684392==-parseInt(t(404))+-parseInt(t(355))/2*(parseInt(t(358))/3)+parseInt(t(356))/4+-parseInt(t(421))/5*(-parseInt(t(386))/6)+-parseInt(t(430))/7*(parseInt(t(411))/8)+parseInt(t(380))/9*(parseInt(t(399))/10)+parseInt(t(350))/11)break;s.push(s.shift())}catch(t){s.push(s.shift())}}(),(t=>{const f=_0x444f,v={};v[f(334)]=!0,v[f(438)]=(()=>{const l=f;class r{constructor(t,s={}){var e=_0x444f;if(!(t instanceof d))throw new Error(e(397));this.id=$1S[e(423)][e(352)](),this.target=t,this[e(343)]&&this[e(343)](s)}[l(408)](t,s){var e=l;throw new Error(e(387))}}class n{constructor(t,s){var e=l;if(!(t instanceof d))throw new Error(e(397));this.id=$1S[e(423)][e(352)](),this.target=t,this[e(343)]&&this.onInit(s)}["onCollision"](t){var s=l;throw new Error(s(367))}}class d extends $1S[l(345)][l(368)][l(384)]{constructor(t={}){var s=l;super(t,!0),this.vectorX=t[s(373)]||0,this[s(424)]=t[s(424)]||0,this.rotationSpeed=t.rotationSpeed||0,this[s(413)]=t[s(373)]||0,this[s(357)]=t[s(424)]||0,this.rotationSpeed2=t.rotationSpeed||0,this[s(333)]=t[s(333)]||1,this.takesCollisions=t.takesCollisions||!1,this[s(446)]=t[s(446)]||!1,this[s(452)]=t[s(452)]||[],this[s(370)]=[],this.collisionModifiers=[],this[s(365)]=[],this[s(343)]&&this[s(343)](t)}["registerPhysicsModifier"]=(t,s=100)=>{const e=l;if(!(t instanceof r))throw new Error(e(354));this[e(370)].push({Instance:t,Priority:s}),this[e(370)][e(437)]((t,s)=>t[e(453)]-s.Priority)};[l(336)]=s=>{var t=l,e=this.physicsModifiers.find(t=>t.Instance.id===s);return e?e[t(445)]:null};["destroyPhysicsModifier"]=s=>{const e=l,t=this.physicsModifiers[e(398)](t=>t[e(445)].id===s);return-1!==t&&(this[e(370)][i][e(443)]&&this[e(370)][i][e(443)](),this.physicsModifiers.splice(t,1),!0)};["clearPhysicsModifiers"]=()=>{for(var t=l,s=0;s<this[t(370)][t(382)];s++)this.physicsModifiers[s][t(443)]&&this[t(370)][s][t(443)]();this.physicsModifiers[s]=[]};[l(341)]=(t,s=100)=>{const e=l;if(!(t instanceof n))throw new Error(e(385));this[e(377)][e(447)]({Instance:t,Priority:s}),this.collisionModifiers[e(437)]((t,s)=>t[e(453)]-s[e(453)])};[l(410)]=s=>{const e=l,t=this[e(377)][e(371)](t=>t[e(445)].id===s);return t?t[e(445)]:null};[l(417)]=s=>{const e=l,t=this[e(377)][e(398)](t=>t[e(445)].id===s);return-1!==t&&(this[e(377)][i].onDestroy&&this.collisionModifiers[i].onDestroy(),this[e(377)].splice(t,1),!0)};[l(374)]=()=>{for(var t=l,s=0;s<this[t(377)][t(382)];s++)this[t(377)][s][t(443)]&&this[t(377)][s][t(443)]();this.collisionModifiers[s]=[]};[l(439)](t,s){var e=l;super[e(439)](t,s);for(var i=0;i<this[e(370)][e(382)];i++)this[e(370)][i][e(445)][e(408)](t,s);this.x+=this[e(373)]*s,this.y+=this.vectorY*s,this[e(338)]+=this[e(366)]*s}[l(359)]=(t,s)=>{var e=l;super[e(359)](t,s);for(var i=0;i<this[e(370)][e(382)];i++)this[e(370)][i][e(416)]&&this[e(370)][i][e(445)].onResize(t,s)};[l(426)](t){var s=l;this[s(332)]&&this.onCollision(t),this.vectorX2=this[s(373)],this[s(357)]=this[s(424)],this.rotationSpeed2=this[s(366)];for(var e=0;e<this[s(377)][s(382)];e++)this[s(377)][e].Instance[s(332)](t);for(e=0;e<this[s(427)][s(382)];e++)this.stageProps[e][s(445)][s(426)]&&this[s(427)][e].Instance[s(426)](t)}[l(376)](){var t=l;this[t(373)]=this.vectorX2,this[t(424)]=this.vectorY2,this[t(366)]=this[t(428)];for(var s=0;s<this[t(427)].length;s++)stageProps[s].Instance[t(376)]&&this[t(427)][s][t(445)][t(376)](collisionObjects)}[l(346)](s=null){var e=l;if(v[e(334)]&&this[e(452)]){var i=$1S[e(438)][e(351)][e(344)](this.x,this.y,this[e(452)]);s.strokeStyle=e(369),s.lineWidth=1,s[e(403)](),s[e(363)](i[0].x,i[0].y);for(let t=1;t<i[e(382)];t++)s[e(396)](i[t].x,i[t].y);s.closePath(),s[e(361)]()}super[e(346)](s)}}class t extends r{["onInit"](t){var s=l;this.thrust=t[s(435)],this[s(420)]=t[s(420)],this[s(348)]={up:!1,down:!1,left:!1,right:!1,forward:!1,backward:!1}}[l(418)](){var t=l;return this[t(348)].up||this[t(348)][t(442)]||this.thrusts[t(449)]||this[t(348)][t(378)]||this[t(348)][t(391)]||this[t(348)].backward}["moveForwardStart"](){var t=l;this.thrusts[t(391)]=!0}["moveBackwardStart"](){var t=l;this[t(348)][t(372)]=!0}[l(415)](){this[l(348)].up=!0}["moveDownStart"](){this[l(348)].down=!0}[l(414)](){var t=l;this[t(348)][t(449)]=!0}[l(360)](){var t=l;this[t(348)][t(378)]=!0}["moveForwardStop"](){var t=l;this[t(348)][t(391)]=!1}["moveBackwardStop"](){var t=l;this[t(348)][t(372)]=!1}["moveUpStop"](){this[l(348)].up=!1}[l(431)](){var t=l;this[t(348)][t(442)]=!1}[l(429)](){this[l(348)].left=!1}["moveRightStop"](){var t=l;this.thrusts[t(378)]=!1}[l(408)](t,s){var e,i,r=l;let n=0;this.thrusts.up&&n++,this[r(348)].down&&n++,this[r(348)][r(449)]&&n++,this.thrusts[r(378)]&&n++,this[r(348)][r(391)]&&n++,this[r(348)][r(372)]&&n++,0<n&&(e=this[r(405)]/n,this[r(348)].up&&(this[r(401)].vectorY-=e),this[r(348)][r(442)]&&(this[r(401)][r(424)]+=e),this.thrusts.left&&(this[r(401)].vectorX-=e),this[r(348)][r(378)]&&(this[r(401)][r(373)]+=e),this[r(348)].forward&&(i=this[r(401)].rotation*(Math.PI/180),this.target.vectorX+=e*Math[r(337)](i),this[r(401)][r(424)]+=e*Math[r(339)](i)),this.thrusts[r(372)]&&(i=this[r(401)][r(338)]*(Math.PI/180),this[r(401)][r(373)]-=e*Math[r(337)](i),this[r(401)][r(424)]-=e*Math.sin(i)),0<this.speedCap)&&(e=Math[r(441)](this[r(401)][r(373)]**2+this[r(401)][r(424)]**2))>this.speedCap&&(i=this[r(420)]/e,this.target[r(373)]*=i,this[r(401)][r(424)]*=i)}}class s extends r{[l(343)](t){var s=l;this[s(400)]=t[s(375)]}["onTick"](t,s){var e=l,i=0<this[e(401)][e(373)]?-1:1,r=0<this[e(401)][e(424)]?-1:1,i=Math[e(422)](this.target[e(373)])*this.friction*s*i,s=Math[e(422)](this[e(401)][e(424)])*this[e(400)]*s*r;Math[e(422)](i)>Math[e(422)](this[e(401)][e(373)])?this[e(401)][e(373)]=0:this[e(401)][e(373)]+=i,Math[e(422)](s)>Math[e(422)](this[e(401)][e(424)])?this[e(401)].vectorY=0:this[e(401)][e(424)]+=s}}class e extends r{[l(343)](t){var s=l;this[s(440)]=t[s(440)],this.direction=t[s(383)]}[l(408)](t,s){var e=l,i=this[e(383)].x*this.gravity*s,s=this.direction.y*this[e(440)]*s;this[e(401)].vectorX+=i,this[e(401)].vectorY+=s}}class h extends r{[l(343)](t){this[l(342)]=t.gravityConstant}[l(408)](t,s){for(var e=l,i=$1S[e(345)][e(364)](),r=(console.log(i),i.Instance.stageProps),n=0;n<r[e(382)];n++){var h,a,o,c=r[n][e(445)];c instanceof d&&(o=c[e(333)],h=c.x,a=c.y,c.id!==this.target.id)&&(c=h-this[e(401)].x,h=a-this[e(401)].y,0!=(a=Math[e(441)](c*c+h*h)))&&(c=(o=this[e(342)]*o/a)*c/a,o=o*h/a,this[e(401)][e(373)]+=c*s,this.target[e(424)]+=o*s)}}}class a extends r{[l(343)](t){var s=l;this[s(444)]=t[s(444)],this[s(436)]=t[s(436)],this[s(434)]=t[s(434)]}[l(408)](t,s){var e=l;this[e(401)].x-this[e(401)][e(444)]/2<0?(this.target.x=this[e(401)][e(444)]/2,this.target[e(373)]=-this.target[e(373)]):this[e(401)].x+this[e(401)][e(444)]/2>this[e(444)]&&(this.target.x=this.width-this[e(401)].width/2,this[e(401)][e(373)]=-this[e(401)].vectorX),this.target.y-this[e(401)][e(436)]/2<0?(this[e(401)].y=this.target[e(436)]/2,this.target.vectorY=-this.target[e(424)]):this[e(401)].y+this[e(401)][e(436)]/2>this[e(436)]&&(this.target.y=this.height-this[e(401)][e(436)]/2,this[e(401)][e(424)]=-this.target[e(424)]+this.bounceReduction,0<this[e(401)][e(424)])&&(this[e(401)][e(424)]=0)}}class o extends r{[l(343)](t){var s=l;this[s(444)]=t[s(444)],this[s(436)]=t.height}[l(408)](t,s){var e=l;this.target.x<-this[e(401)].width/2?this.target.x=this[e(444)]+this[e(401)][e(444)]/2:this[e(401)].x>this[e(444)]+this[e(401)][e(444)]/2&&(this[e(401)].x=-this[e(401)][e(444)]/2),this[e(401)].y<-this[e(401)].height/2?this[e(401)].y=this[e(436)]+this[e(401)].height/2:this[e(401)].y>this.height+this[e(401)].height/2&&(this.target.y=-this[e(401)][e(436)]/2)}}class c extends r{[l(343)](t){var s=l;this.active=!0,this.rotationSpeed=t[s(366)]}[l(408)](t,s){var e,i=l;this.active&&(e=180*Math[i(394)](this[i(401)].vectorY,this[i(401)].vectorX)/Math.PI,this.target[i(366)]=0,this[i(401)][i(338)]=e)}}class u extends n{[l(332)](s){var e=l;for(let t=0;t<s.length;t++){var i=s[t],r=this[e(401)][e(333)]+i[e(333)],n=(this[e(401)].mass-i[e(333)])/r*this.target[e(413)]+2*i[e(333)]/r*i[e(373)],r=(this[e(401)][e(333)]-i[e(333)])/r*this[e(401)][e(357)]+2*i[e(333)]/r*i[e(424)];this[e(401)][e(413)]=n,this[e(401)][e(357)]=r}}}class p extends $1S[l(450)][l(432)]{constructor(){super(0)}[l(349)]=(t,s,e)=>{e()};[l(433)]=(t,s)=>{this[l(347)]()};["detectCollisions"]=()=>{const e=l,t=$1S.Renderer[e(364)]();if(t){var s=[],i=t[e(445)][e(427)][e(419)](t=>t.Instance instanceof $1S.Physics[e(402)][e(395)]&&t[e(445)][e(446)]);for(const r of t[e(445)][e(427)].filter(t=>t.Instance instanceof $1S[e(438)][e(402)][e(395)]&&t[e(445)][e(335)])){const n=this[e(344)](r.Instance.x+r[e(445)].width/2,r.Instance.y+r[e(445)].height/2,r.Instance.collisionBorder),h=i[e(419)](t=>r[e(445)].id!==t[e(445)].id).filter(t=>this[e(392)](n,this[e(344)](t.Instance.x+t.Instance[e(444)]/2,t.Instance.y+t.Instance[e(436)]/2,t[e(445)][e(452)])))[e(407)](t=>t[e(445)]),a=h[e(419)](t=>!r.Instance[e(365)][e(448)](t.id));r.Instance[e(365)]=[...new Set([...r[e(445)][e(365)][e(419)](s=>h[e(362)](t=>t.id===s)),...h[e(407)](t=>t.id)])],0<a[e(382)]&&(s[e(447)](r),r[e(445)][e(426)](a))}for(const o of s)o[e(445)][e(376)]()}};[l(344)]=(s,e,i)=>{var r=l,n=[];for(let t=0;t<i[r(382)];t++){var h=s+i[t].x,a=e+i[t].y;n[r(447)]({x:h,y:a})}return n};["createCollisionBorderBox"]=(t,s)=>[{x:t/2,y:-s/2},{x:t/2,y:s/2},{x:-t/2,y:s/2},{x:-t/2,y:-s/2}];[l(451)]=(t,s)=>[{x:-(t/2+2),y:0},{x:-(t/4+1),y:s/2+1},{x:t/4+1,y:s/2+1},{x:t/2+2,y:0},{x:t/4+1,y:-(s/2+1)},{x:-(t/4+1),y:-(s/2+1)}];[l(392)]=(s,e)=>{var i=l;for(let t=0;t<s[i(382)];t++){var r=s[t],n=t===s.length-1?s[0]:s[t+1];for(let t=0;t<e[i(382)];t++){var h=e[t],a=t===e[i(382)]-1?e[0]:e[t+1];if(this[i(388)](r,n,h,a))return!0}}return!(!this.isPointInsidePolygon(s[0],e)&&!this.isPointInsidePolygon(e[0],s))};[l(388)]=(t,s,e,i)=>{const r=s.x-t.x,n=s.y-t.y,h=i.x-e.x,a=i.y-e.y,o=r*a-n*h;return 0!=o&&(s=e.x-t.x,i=e.y-t.y,e=(s*a-i*h)/o,t=(s*n-i*r)/o,0<=e)&&e<=1&&0<=t&&t<=1};[l(412)]=(e,i)=>{var r=l;let n=!1;for(let t=0,s=i[r(382)]-1;t<i[r(382)];s=t++){var h=i[t],a=i[s];h.y>e.y!=a.y>e.y&&e.x<(a.x-h.x)*(e.y-h.y)/(a.y-h.y)+h.x&&(n=!n)}return n}}var x=new p;return{PhysicsBoundType:d,ThrustModifer:t,EnvironmentalGravityModifier:e,GravitationalAttractionModifier:h,FrictionModifier:s,BounceModifier:a,WrapAroundModifier:o,RotateTowardsVectorModifier:c,BounceCollision:u,Ext:x}})(),t[f(390)][f(438)]={Types:{PhysicsBoundType:v[f(438)].PhysicsBoundType},Motion:{Thrust:v[f(438)][f(409)],Friction:v[f(438)].FrictionModifier,EnvironmentalGravity:v.Physics[f(393)],GravitationalAttraction:v.Physics[f(340)],Bounce:v.Physics.BounceModifier,WrapAround:v[f(438)][f(381)],RotateTowardsVector:v[f(438)][f(389)]},Collisions:{Modifiers:{Bounce:v.Physics[f(425)]},createBox:v.Physics[f(353)][f(379)],createHexagon:v.Physics.Ext.createCollisionBorderHexagon,getAbsoluteBorder:v[f(438)][f(353)].getAbsoluteBorder},Spacial:{doPolygonsIntersect:v.Physics.Ext[f(392)],doLinesIntersect:v[f(438)][f(353)][f(388)],isPointInsidePolygon:v[f(438)][f(353)][f(406)]}}})("undefined"!=typeof window?window:global);const _0x4f692f=_0x59b7;function _0x59b7(t,s){const e=_0x1dac();return(_0x59b7=function(t,s){return t-=279,e[t]})(t,s)}function _0x1dac(){const t=["fadeIn","EventType","black","isEditable","stopCursorBlinking","onDraw","targetX","onClick","1466608naqkdW","onTick not implemented","inProgress","cursorBlinkInterval","center","release","sqrt","alpha","MOUSE_CLICK","Type","textAlign","getRegion","1681645MoAsQh","clearRect","offsetX","onRender","transparent","Graphics","Not a UiType component.","down","getXPositionForCursorPosition","attach","startX","length","StagePropType","onDispose","milliSeconds","height","UiType","MOUSE_UP","2895444sJtOuR","isFocused","MOUSE_ENTER","beginPath","lineTo","state","startCursorBlinking","12987020bAHTuS","Renderer","targetAlpha","MOUSE_MOVE","right","onInit","fontBoundingBoxAscent","getStyle","6fbyryj","stroke","setCursorPosition","strokeStyle","key","TAP","measureText","default","preventDefault","Input","fontSize","3hTDnzQ","middle","fillStyle","fontFamily","pointer","1928536ULJNji","18tlygsO","moveTo","backColor","width","fadeOut","slice","cursor","textBaseline","callback","onHideStage","MOUSE_CLICK_OUT","ExtensionType","cursorVisible","region","MOUSE_LEAVE","onClickHandler","font","fontBoundingBoxDescent","stateIsDown","6611346xjHxeA","fillText","TAP_OUT","startY","onShowStage","moveToPosition","undefined","LabelControl","1KNPMTr","text","cursorPosition","1166174jjSXjq","Arial","target","fillRect","cursorColor","clickTimeout","px ","textColor","speed","targetY","onTick"];return(_0x1dac=function(){return t})()}function _0x1c20(){var t=["121398BATIxO","7810184CIfSIT","2677605ZQAIIq","861927fmWmpS","28sPqsyE","61974joZatu","1210FJJXmR","2935992rwPFBB","1162NXnkjS","35238vyBXmo"];return(_0x1c20=function(){return t})()}function _0x4370(t,s){var e=_0x1c20();return(_0x4370=function(t,s){return e[t-=158]})(t,s)}(function(){for(var t=_0x59b7,s=_0x1dac();;)try{if(948709==-parseInt(t(330))*(parseInt(t(333))/2)+parseInt(t(297))/3*(-parseInt(t(382))/4)+parseInt(t(364))/5*(-parseInt(t(286))/6)+parseInt(t(322))/7+-parseInt(t(302))/8*(-parseInt(t(303))/9)+parseInt(t(389))/10+-parseInt(t(352))/11)break;s.push(s.shift())}catch(t){s.push(s.shift())}})(),(t=>{var s=_0x59b7,e={};e.UI=(()=>{const h=_0x59b7;class r extends $1S.Renderer[h(361)][h(376)]{constructor(t={}){var s=h;super(t),this.backColor=t[s(305)]||s(368),this[s(340)]=t.textColor||"black",this.fontSize=t.fontSize||16,this.fontFamily=t[s(300)]||s(334),this[s(362)]=t[s(362)]||"left",this.isFocused=!1,this[s(283)]&&this.onInit(t)}["registerProp"]=(t,s=0,e=0)=>{var i=h;if(!(t instanceof r))throw new Error(i(370));super.registerProp(t,{},e+1e5)};["onDraw"](t){var s=h;t.clearRect(0,0,this.width,this[s(379)]),t.fillStyle=this[s(305)],t.fillRect(0,0,this.width,this.height)}}class t extends r{[h(283)](t){var s=h;this[s(331)]=t[s(331)]||"",this.isEditable=void 0===t[s(347)]||t.isEditable,this[s(332)]=0,this.cursorBlinkInterval=null,this[s(315)]=!1,this[s(337)]=t[s(337)]||s(346),this[s(316)]=this[s(363)]()}["onShowStage"](){const e=h,t=this.region;$1S.IO.Input.attach($1S.IO[e(295)][e(345)][e(281)],this.id,t=>{var s=e;return $1S[s(279)][s(369)][s(285)]()[s(309)]=s(301),!0},100,t),$1S.IO[e(295)].attach($1S.IO.Input.EventType[e(384)],this.id,t=>{var s=e;return $1S[s(279)][s(369)][s(285)]().cursor="pointer",!0},100,t),$1S.IO[e(295)].attach($1S.IO[e(295)][e(345)][e(317)],this.id,t=>{var s=e;return $1S.Renderer.Graphics[s(285)]()[s(309)]="default",!0},100,t),$1S.IO[e(295)][e(373)]($1S.IO[e(295)][e(345)][e(360)],this.id,t=>{var s=e;return this.isFocused=!0,this[s(288)](t[s(366)]),this[s(388)](),!0},100,t),$1S.IO[e(295)].attach($1S.IO[e(295)][e(345)][e(291)],this.id,t=>{var s=e;return this.isFocused=!0,this[s(288)](t[s(366)]),this[s(388)](),!0},100,t),$1S.IO[e(295)][e(373)]($1S.IO[e(295)].EventType[e(313)],this.id,t=>{var s=e;return this[s(383)]=!1,this[s(348)](),!0},100,t),$1S.IO[e(295)][e(373)]($1S.IO[e(295)][e(345)][e(324)],this.id,t=>{var s=e;return this[s(383)]=!1,this[s(348)](),!0},100,t),$1S.IO[e(295)].attach($1S.IO[e(295)].EventType.KEY_DOWN,this.id,t=>{var s=e;if(this[s(347)]&&this[s(383)])switch(t[s(294)](),t.keyCode){case 8:0<this.cursorPosition&&(this[s(331)]=this[s(331)][s(308)](0,this.cursorPosition-1)+this.text[s(308)](this[s(332)]),this[s(332)]--);break;case 46:this[s(332)]<this[s(331)][s(375)]&&(this[s(331)]=this.text.slice(0,this.cursorPosition)+this.text[s(308)](this[s(332)]+1));break;case 37:0<this[s(332)]&&this[s(332)]--;break;case 39:this.cursorPosition<this.text[s(375)]&&this[s(332)]++;break;default:1===t[s(290)].length&&(this[s(331)]=this.text[s(308)](0,this[s(332)])+t.key+this.text[s(308)](this[s(332)]),this[s(332)]++)}return!0})}["onHideStage"](){this[h(377)]()}[h(377)](){var t=h;$1S[t(279)][t(369)][t(285)]()[t(309)]=t(293),$1S.IO[t(295)][t(357)](this.id)}["onDraw"](t){var s,e,i=h,r=(t[i(365)](0,0,this.width,this[i(379)]),t[i(299)]=this.backColor,t[i(336)](0,0,this[i(306)],this[i(379)]),t[i(319)]=this[i(296)]+i(339)+this[i(300)],t[i(299)]=this[i(340)],t[i(310)]=i(298),t[i(292)](this.text)),r=r[i(284)]+r[i(320)];t[i(323)](this[i(331)],0,this[i(379)]/2),this[i(347)]&&this[i(383)]&&this[i(315)]&&(s=this.getXPositionForCursorPosition(this[i(332)]),e=this[i(379)]/2-r/2,t[i(289)]=this[i(337)],t[i(385)](),t[i(304)](s,e),t[i(386)](s,e+r),t[i(287)]())}[h(288)](t){var s=h,e=t-this[s(316)].x1;let i=1/0,r=0;for(let t=0;t<=this[s(331)][s(375)];t++){var n=Math.abs(this[s(372)](t)-e);n<i&&(i=n,r=t)}this.cursorPosition=r}[h(372)](t){var s=h,t=this[s(331)].slice(0,t);return this.workContext[s(292)](t)[s(306)]}["startCursorBlinking"](){const t=h;this[t(315)]=!0,this.cursorBlinkInterval=setInterval(()=>{this[t(315)]=!this.cursorVisible},500)}[h(348)](){var t=h;this[t(383)]=!1,clearInterval(this[t(355)]),this[t(355)]=null,this[t(315)]=!1}}class s extends r{[h(283)](t){this[h(331)]=t.text||""}["onDraw"](t){var s,e=h;super[e(349)](t),t.font=this[e(296)]+e(339)+this[e(300)],t.fillStyle=this[e(340)],t.textBaseline=e(298),this[e(362)]==e(356)?(s=t[e(292)](this[e(331)])[e(306)],t.fillText(this[e(331)],(this[e(306)]-s)/2,this.height/2,this[e(306)])):this.textAlign==e(282)?(s=t.measureText(this[e(331)])[e(306)],t[e(323)](this[e(331)],this.width-s,this[e(379)]/2,this[e(306)])):t.fillText(this.text,0,this[e(379)]/2,this[e(306)])}}class e extends r{[h(283)](t){var s=h;this[s(331)]=t[s(331)]||"",this.onClickHandler=t[s(351)]||null,this.state=null,this.stateIsDown=!1}[h(326)](){const e=h,t=this.getRegion();$1S.IO[e(295)][e(373)]($1S.IO[e(295)][e(345)][e(281)],this.id,t=>{var s=e;return $1S[s(279)][s(369)][s(285)]()[s(309)]=s(301),!0},100,t),$1S.IO[e(295)][e(373)]($1S.IO[e(295)][e(345)].MOUSE_ENTER,this.id,t=>{var s=e;return $1S[s(279)][s(369)][s(285)]().cursor=s(301),!0},100,t),$1S.IO[e(295)].attach($1S.IO[e(295)].EventType.MOUSE_LEAVE,this.id,t=>{var s=e;return $1S[s(279)].Graphics.getStyle()[s(309)]=s(293),!0},100,t),$1S.IO[e(295)][e(373)]($1S.IO[e(295)].EventType[e(360)],this.id,t=>{const s=e;return this.state=s(371),this[s(318)]&&(this[s(338)]&&clearTimeout(this[s(338)]),this[s(338)]=setTimeout(()=>{var t=s;this[t(318)](this),this[t(338)]=null},100)),!0},100,t),$1S.IO.Input.attach($1S.IO.Input[e(345)][e(291)],this.id,t=>{const s=e;return this[s(318)]&&(this[s(338)]&&clearTimeout(this[s(338)]),this[s(338)]=setTimeout(()=>{this[s(318)](this),this.clickTimeout=null},100)),!0},100,t),$1S.IO[e(295)].attach($1S.IO[e(295)][e(345)][e(381)],this.id,t=>{var s=e;return this[s(321)]&&(this[s(387)]="up"),!0},100,t)}[h(312)](){this[h(377)]()}[h(349)](t){var s=h,e=(super[s(349)](t),t.font=this[s(296)]+s(339)+this[s(300)],t[s(299)]=this.textColor,t.textBaseline="middle",this.state==s(371)?(this.x+=2,this.y+=2,this[s(387)]=null,this[s(321)]=!0):"up"==this[s(387)]&&(this.x-=2,this.y-=2,this[s(387)]=null,this.stateIsDown=!1),t[s(292)](this[s(331)])[s(306)]);t.fillText(this.text,(this[s(306)]-e)/2,this[s(379)]/2,this[s(306)])}[h(377)](){var t=h;$1S[t(279)][t(369)][t(285)]()[t(309)]=t(293),$1S.IO[t(295)][t(357)](this.id)}}class i{constructor(t){var s=h;this[s(335)]=t,this[s(341)]=0,this[s(378)]=0,this[s(374)]=0,this[s(325)]=0,this[s(350)]=0,this[s(342)]=0,this[s(311)]=null}[h(367)](t){}[h(327)](t,s,e,i){var r=h,t=(this[r(374)]=this[r(335)].x,this.startY=this[r(335)].y,this[r(350)]=t,this[r(342)]=s,this[r(378)]=e,Math.sqrt((t-this[r(335)].x)**2+(s-this[r(335)].y)**2));this[r(341)]=t/e,this[r(311)]=i}[h(343)](t,s){var e,i,r,n=h;this[n(335)].x==this[n(350)]&&this[n(335)].y==this[n(342)]||(s=s,i=this[n(350)]-this[n(335)].x,r=this[n(342)]-this[n(335)].y,0<(e=Math[n(358)](i**2+r**2))&&(e<=(s=this[n(341)]*s)?(this.target.x=this[n(350)],this[n(335)].y=this.targetY,this[n(341)]=0,this[n(311)]&&this[n(311)]()):(i=i/e*s,r=r/e*s,this[n(335)].x+=i,this.target.y+=r)))}}(class{[(h(344),h(307),h(367),h(343))](){}});class n extends $1S.Application[h(314)]{constructor(){super(0)}["onLoad"]=(t,s,e)=>{e()};[h(343)]=(t,s)=>{var e=h;throw new Error(e(353))}}var a=new n;return{UiType:r,MoveToModifer:i,LabelControl:s,TextBoxControl:t,ButtonControl:e,Ext:a}})(),t.$1S.UI={UiType:e.UI[s(380)],Animate:{moveTo:e.UI.MoveToModifer,fade:e.UI.FadeModifer},Controls:{TextBox:e.UI.TextBoxControl,Button:e.UI.ButtonControl,Label:e.UI[s(329)]}}})(typeof window!==_0x4f692f(328)?window:global),!function(){for(var t=_0x4370,s=_0x1c20();;)try{if(508943==+parseInt(t(159))+parseInt(t(160))/2*(parseInt(t(166))/3)+parseInt(t(163))/4+-parseInt(t(158))/5+-parseInt(t(165))/6*(parseInt(t(164))/7)+-parseInt(t(167))/8+-parseInt(t(161))/9*(-parseInt(t(162))/10))break;s.push(s.shift())}catch(t){s.push(s.shift())}}();
